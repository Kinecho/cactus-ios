(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{12:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BillingPeriod=void 0;var o,a,s=r(47),u=r(7);!function(e){e.weekly="weekly",e.monthly="monthly",e.yearly="yearly",e.once="once",e.never="never"}(o=t.BillingPeriod||(t.BillingPeriod={})),function(e){e.availableForSale="availableForSale",e.stripePlanId="stripePlanId",e.appleProductId="appleProductId",e.androidProductId="androidProductId",e.billingPeriod="billingPeriod"}(a||(a={}));var c=function(e){function t(t){var r=e.call(this,t)||this;return r.schema=s.SchemaName.subscriptionProducts,r.displayName="",r.priceCentsUsd=0,r.billingPeriod=o.monthly,r.availableForSale=!1,r.subscriptionTier=u.SubscriptionTier.PLUS,t&&Object.assign(r,t),r}return i(t,e),Object.defineProperty(t.prototype,"isFree",{get:function(){return 0===this.priceCentsUsd||this.billingPeriod===o.never},enumerable:!1,configurable:!0}),t.Fields=a,t}(s.default);t.default=c},122:function(e,t,r){"use strict";var n=r(44);r.n(n).a},124:function(e,t,r){"use strict";r.r(t);var n=r(15),i=r(3),o=r.n(i),a=r(16),s=r(35),u=r(66);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l,d=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},m=new o.a("InsightWordChart"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMounted=!1,t.selected=null,t}return d(t,e),t.prototype.mounted=function(){this.isMounted=!0,this.renderBubbles()},t.prototype.onWords=function(){this.renderBubbles()},t.prototype.renderBubbles=function(){var e=this;if(this.isMounted){this.$forceUpdate();Object(u.drawWordBubbleChart)(".bubble-chart",this.words,f(f({selectable:this.selectable},this.chartConfig),{wordClicked:function(t,r){m.info("Clicked ",t),e.selected=r?t:null,e.$emit("selected",r?t:null)}}))}else m.info("Not mounted yet")},p([Object(s.b)("words")],t.prototype,"onWords",null),p([Object(s.a)({type:Array,default:[]})],t.prototype,"words",void 0),p([Object(s.a)({type:Boolean,default:!1})],t.prototype,"selectable",void 0),p([Object(s.a)({type:Boolean,default:!1})],t.prototype,"blurry",void 0),p([Object(s.a)({type:Object,required:!1,default:null})],t.prototype,"chartConfig",void 0),t=p([a.b],t)}(n.a),v=(r(81),r(45)),y=Object(v.a)(h,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"insight-word-chart"},[t("div",{class:["bubble-chart",{isBlurry:this.blurry}]})])}),[],!1,null,"51abbbc6",null).exports,A=r(21),b=r(23),g=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},E=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e},S=new o.a("util.ts");function T(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function _(e){var t=document.getElementById(e);return!!t&&(t.classList.remove("open"),!0)}function I(e){var t=document.getElementById(e);return!!t&&(t.classList.add("open"),!0)}function O(e,t){var r,n=document.getElementById(e);n&&(S.warn("a modal with id "+e+" already exists, removing it"),n.remove());var i=T('<button title="Close" class="modal-close tertiary icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="18" height="18"><path fill="#33ccab" d="M8.414 7l5.293 5.293a1 1 0 0 1-1.414 1.414L7 8.414l-5.293 5.293a1 1 0 1 1-1.414-1.414L5.586 7 .293 1.707A1 1 0 1 1 1.707.293L7 5.586 12.293.293a1 1 0 0 1 1.414 1.414L8.414 7z"/></svg>\n    </button>');i.addEventListener("click",(function(){_(e),t.onClose&&t.onClose()}));var o=document.createElement("div");if(o.classList.add("modal-content"),o.append(i),t.imageUrl){var a=T('<img src="'+t.imageUrl+'" alt="'+(t.imageAlt||"")+'" />');o.append(a)}var s=null,u=null,c=null;t.title&&((s=document.createElement("h2")).innerText=t.title,o.append(s)),t.message&&((u=document.createElement("div")).innerText=t.message,o.append(u)),t.buttonCta&&t.buttonUrl&&((c=document.createElement("a")).innerText=t.buttonCta,c.href=t.buttonUrl,c.className="button",c.target="_blank",o.append(c));var l=document.createElement("div");return l.id=e,l.classList.add("modal-window"),t.classNames&&(r=l.classList).add.apply(r,E(t.classNames)),l.appendChild(o),document.body.appendChild(l)}function C(e){try{return b.parse(window.location.search,{ignoreQueryPrefix:!0})[e]}catch(e){return S.error("browser does not support url params",e),null}}var N,P,w=r(46),D=r(13),R=(r(135),r(134),r(14),r(11)),M=r(8),U=(r(87),r(90),r(94),r(126),r(125),r(69)),L=(r(96),r(101),r(19)),B=r.n(L),k=function(){},j=r(12),F=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),x=function(e){function t(){var t,r,n=null!==e&&e.apply(this,arguments)||this;return n.settings={dates:{longFormat:"LLLL d, yyyy",shortFormat:"L/d/yyyy"}},n.pronouns={YOU:"you"},n.checkout={UPGRADE:"Upgrade",TRY_CACTUS_PLUS:"Try Cactus Plus",CURRENT_PLAN:"Current Plan",MANAGE_MY_PLAN:"Manage My Plan",PURCHASE:"Purchase",SIGN_IN_TO_CONTINUE_CHECKOUT:"Please log in to continue the upgrade process.",SIGN_IN_TO_CONTINUE_RESTORING_PURCHASES:"Please sign in to restoring your purchases",BILLING_PERIOD:(t={},t[j.BillingPeriod.weekly]="Weekly",t[j.BillingPeriod.monthly]="Monthly",t[j.BillingPeriod.yearly]="Annual",t[j.BillingPeriod.once]="One Time",t[j.BillingPeriod.never]="Free",t),BILLING_PERIOD_PER:(r={},r[j.BillingPeriod.weekly]="Week",r[j.BillingPeriod.monthly]="Month",r[j.BillingPeriod.yearly]="Year",r[j.BillingPeriod.once]="Once",r[j.BillingPeriod.never]="Never",r),TIER_BASIC:"Basic",TIER_PLUS:"Plus",TIER_PREMIUM:"Premium"},n.account={PREFERRED_NOTIFICATION_TIME:"What time would you like to be notified?",SELECTED_TIMEZONE_DIFFERS_FROM_DEVICE:"Your device's time zone doesn't match your selected time zone.",UPDATE_TIMEZONE_TO:"Would you like to update your time zone to",CANCEL_UPDATE_TIMEZONE:"No, don't update",CONFIRM_UPDATE_TIMEZONE:"Yes, update timezone",EMAIL_NOTIFICATION_CHECKBOX_LABEL:"Receive an email when a new prompt is ready",PERMANENTLY_DELETE_ACCOUNT:"Permanently Delete Account...",DELETE_ACCOUNT:"Delete Cactus Account"},n.common={LOG_IN:"Log In",NEXT:"Next",SIGN_UP:"Sign Up",TRY_IT_FREE:"Try It Free",SUBMIT:"Submit",SIGNING_IN:"Signing In",PRICING:"Pricing",LOG_OUT:"Log Out",ENTER_YOUR_EMAIL_ADDRESS:"Enter your email address",WELCOME:"Welcome",WELCOME_BACK:"Welcome back",ACCOUNT:"Account",EMAIL:"Email",EMAIL_ADDRESS:"Email Address",SUBSCRIPTION:"Subscription",TIER:"Tier",FIRST_NAME:"First Name",LAST_NAME:"Last Name",NOTIFICATIONS:"Notifications",REMOVE:"Remove",TIME_ZONE:"Time Zone",LOADING:"Loading",HOUR:"Hour",MINUTE:"Minute",DAYS_LEFT:"days left",DAY_LEFT:"day left",DAYS_LEFT_IN_TRIAL:"days left in trial",DAY_LEFT_IN_TRIAL:"day left in trial",TRIAL_ENDS_TODAY:"Trial ends today",ENDS_TODAY:"Ends today",LEARN_MORE:"Learn More",TRIAL:"Trial",IOS:"iOS",ANDROID:"Android",VERIFY_IN_GMAIL:"Confirm in Gmail",VERIFY_GMAIL_URL:"https://mail.google.com/mail/u/0/#search/from%3A%40cactus.app+in%3Aanywhere"},n.navigation={ACCOUNT:"Account",CORE_VALUES:"Core Values",SOCIAL:"Friends",MY_JOURNAL:"My Journal",JOURNAL:"Journal",ACTIVITY:"Activity",INSIGHTS:"Insights",HOME:"Home"},n.prompts={TODAY:"Today",EDIT_NOTE:"Edit Note",REFLECT:"Reflect",SHARE_PROMPT:"Share Prompt",ADD_A_NOTE:"Add a Note",DONE:"Done",CLOSE:"Close",TAP_ANYWHERE:"Tap Anywhere",SAVED:"Saved",SAVING:"Saving",CELEBRATIONS:["Well done!","Nice work!","Way to go!"],REFLECTIONS:"Reflections",SECONDS:"Seconds",SECOND:"Second",MINUTES:"Minutes",DAY_STREAK:"Day Streak",WEEK_STREAK:"Week Streak",MONTH_STREAK:"Month Streak",GO_HOME:"Go Home",SIGN_UP_MESSAGE:"Sign Up to Keep it Going",SHARE_YOUR_NOTE:"Share Your Note",SHARE_NOTE:"Share Note",SHARE_PROMPT_COPY_MD:"Become more courageous and **build trust and connection** with others."},n.elements={MEANING:"Meaning",MEANING_DESCRIPTION:"Living with a sense of purpose while you enjoy the present",EXPERIENCE:"Experience",EXPERIENCE_DESCRIPTION:"Exploring your intellectual curiosities and openly observing life’s lessons",ENERGY:"Energy",ENERGY_DESCRIPTION:"Caring for your physical health and managing the mind-body connection",EMOTIONS:"Emotions",EMOTIONS_DESCRIPTION:"Embracing the spectrum of emotions as you strive for optimism",RELATIONSHIPS:"Relationships",RELATIONSHIPS_DESCRIPTION:"Developing rewarding and fulfilling relationships with yourself and others"},n.error={PLEASE_ENTER_A_VALID_EMAIL_ADDRESS:"Please enter a valid email address",PLEASE_ENTER_AN_EMAIL_ADDRESS:"Please enter an email address",SORRY_WE_ARE_HAVING_ISSUES:"Sorry, it looks like we're having issues.",SORRY_WE_ARE_HAVING_ISSUES_TRY_AGAIN:"Sorry, it looks like we're having issues. Please try again later."},n.auth={CONNECTED_ACCOUNTS:"Connected Accounts",DISPLAY_NAME:"Display Name",MEMBER_SINCE:"Member Since",SIGN_UP_FREE:"Sign Up Free",magicLinkSuccess:function(e){return"To confirm your email address and securely sign in, tap the button in the email sent to "+e+"."}},n}return F(t,e),t.prototype.exclamation=function(e){return e?e+"!":""},t}(k),G=new o.a("CopyService");!function(e){e.en_US="en-US",e.es="es"}(P||(P={}));var H,W,K,z=function(){function e(e){switch(void 0===e&&(e={}),this.locale=e.locale||P.en_US,this.locale){case P.en_US:this.copy=new x;break;default:G.error("Unsupported locale "+this.locale+", using "+P.en_US+" as default"),this.copy=new x}}return e.getSharedInstance=function(){if(!e.sharedInstance)throw new Error("No shared CopyService instance is available. Ensure you have called the initialize() function before using the shared instance");return e.sharedInstance},e.initialize=function(t){void 0===t&&(t={}),e.sharedInstance=new e(t)},e.prototype.getTrialDaysLeftShort=function(e,t){return void 0===t&&(t=!1),0===e&&t?this.copy.common.ENDS_TODAY:(0!==e||t)&&1===e?e+" "+this.copy.common.DAY_LEFT:e+" "+this.copy.common.DAYS_LEFT},e.prototype.getTrialDaysLeftLong=function(e,t){return void 0===t&&(t=!1),1===e?t?this.copy.common.TRIAL_ENDS_TODAY:e+" "+this.copy.common.DAY_LEFT_IN_TRIAL:e+" "+this.copy.common.DAYS_LEFT_IN_TRIAL},e.sharedInstance=new e,e}(),J=!1;R.auth.GoogleAuthProvider,R.auth.FacebookAuthProvider,R.auth.TwitterAuthProvider,R.auth.EmailAuthProvider,R.auth.PhoneAuthProvider,R.auth.OAuthProvider;function Y(){if(!J){Object(M.setTimestamp)(R.firestore.Timestamp),H=R.initializeApp(D.Config.firebase);var e=B.a.getItem(L.LocalStorageKey.flamelinkEnvironmentOverride),t=P.en_US,r=R.initializeApp(D.Config.flamelinkFirebaseConfig,W.flamelink);Object(U.a)({firebaseApp:r,dbType:"cf",env:e||D.Config.flamelinkEnvironmentId,locale:t,precache:!0}),H.analytics(),z.initialize({locale:t}),R.firestore().settings({ignoreUndefinedProperties:!0}),J=!0}return R}function V(){return Q().auth()}function Q(){return Y(),H}!function(e){e.flamelink="flamelink"}(W||(W={})),function(e){e.resetPassword="resetPassword",e.recoverEmail="recoverEmail",e.verifyEmail="verifyEmail",e.signIn="signIn"}(K||(K={}));var Z=r(29),q=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},X=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},$=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},ee=(R.firestore.Transaction,R.firestore.DocumentReference,R.firestore.Timestamp),te=R.firestore.FieldValue,re=new o.a("FirestoreService"),ne={includeDeleted:!1,onlyDeleted:!1},ie={includeDeleted:!1,onlyDeleted:!1},oe=function(){function e(){this.firestore=Q().firestore()}return e.prototype.getServerTimestamp=function(){return te.serverTimestamp()},e.prototype.getCurrentTimestamp=function(){return ee.now()},e.prototype.getTimestampFromMilis=function(e){return ee.fromMillis(e)},e.prototype.getTimestampFromDate=function(e){return ee.fromDate(e)},e.prototype.getCollectionRef=function(e){return this.firestore.collection(e)},e.prototype.getCollectionRefFromModel=function(e){return this.firestore.collection(e.collection)},e.prototype.getDocumentRefFromModel=function(e){var t=this.getCollectionRefFromModel(e);return e.id?t.doc(e.id):t.doc()},e.prototype.initializeModel=function(e){var t=this.getCollectionRef(e.collection),r=t.doc();return e.id?r=t.doc(e.id):(e.id=r.id,e.createdAt=new Date),e.updatedAt=new Date,e},e.prototype.save=function(e){return q(this,void 0,Promise,(function(){var t,r,n,i;return X(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t=this.getCollectionRef(e.collection),r=t.doc(),e.id?r=t.doc(e.id):e.id=r.id,e.createdAt||(e.createdAt=new Date),e.updatedAt=new Date,[4,e.toFirestoreData()];case 1:return n=o.sent(),[4,r.set(n,{merge:!0})];case 2:return o.sent(),[2,e];case 3:return i=o.sent(),re.error("failed to save firestore document",i),"permission-denied"===i.code&&(a={title:"Whoops!",message:"You do not have the proper permissions to perform this action.",error:i},O(s="error-"+(new Date).getTime(),{title:a.title,message:a.message||"Something unexpected occurred."}),I(s)),[2];case 4:return[2]}var a,s}))}))},e.prototype.getById=function(e,t,r){return void 0===r&&(r=ne),q(this,void 0,Promise,(function(){var n,i;return X(this,(function(o){switch(o.label){case 0:return n=new t,[4,this.getCollectionRef(n.collection).doc(e).get()];case 1:return(i=o.sent())?r.includeDeleted||!0!==i.get("deleted")?[2,Object(M.fromDocumentSnapshot)(i,t)]:(re.warn("Document is deleted, and the request options did not include deleted objects"),[2]):[2]}}))}))},e.prototype.getFirst=function(e,t){return q(this,void 0,Promise,(function(){var r,n;return X(this,(function(i){switch(i.label){case 0:return[4,this.executeQuery(e,t)];case 1:return r=i.sent(),n=$(r.results,1),[2,n[0]]}}))}))},e.prototype.observeFirst=function(e,t,r){return this.observeQuery(e,t,{onData:function(e){var t=$(e,1)[0];r.onData(t)}})},e.prototype.observeById=function(e,t,r){var n=new t;return this.getCollectionRef(n.collection).doc(e).onSnapshot((function(e){if(!r.includeDeleted&&!0===e.get("deleted"))return re.warn("Document is deleted, and the request options did not include deleted objects",r.queryName),void r.onData(void 0);r.onData(Object(M.fromDocumentSnapshot)(e,t))}),(function(e){re.error('there was an error fetching the document snapshot "'+(r.queryName||"unknown")+'"',e),r.onData(void 0,e)}))},e.prototype.getPaginated=function(e,t,r){return q(this,void 0,Promise,(function(){var n=this;return X(this,(function(i){return[2,new Promise((function(i){return q(n,void 0,void 0,(function(){var n,o,a,s;return X(this,(function(u){switch(u.label){case 0:return n=t.limit,o=t.lastResult,t.onData,a=e,n&&(a=a.limit(n)),(null==o?void 0:o.firstSnapshot)&&(a=a.startAfter(o.firstSnapshot)),[4,(a=a.where(Z.BaseModelField.deleted,"==",!1)).get()];case 1:return s=u.sent(),this.getPaginatedSnapshotHandler((function(e){i(e)}),r)(s),[2]}}))}))}))]}))}))},e.prototype.observePaginated=function(e,t,r){var n=t.limit,i=t.lastResult,o=t.onData,a=e;return a=a.where(Z.BaseModelField.deleted,"==",!1),n&&(a=a.limit(n)),(null==i?void 0:i.lastSnapshot)&&(a=a.startAfter(i.lastSnapshot)),a.onSnapshot(this.getPaginatedSnapshotHandler(o,r,n))},e.prototype.getPaginatedSnapshotHandler=function(e,t,r){return function(n,i){var o={results:[],added:[],removed:[],updated:[],pageSize:r,mightHaveMore:!1,error:i};n.docs.forEach((function(e){var r,n=Object(M.fromDocumentSnapshot)(e,t);n?null===(r=o.results)||void 0===r||r.push(n):re.error("Failed to decode model for doc.id "+e.id+" and type "+t)})),n.docs.length>0&&(o.firstSnapshot=n.docs[0],o.lastSnapshot=n.docs[n.docs.length-1]),r&&n.docs.length===r&&(o.mightHaveMore=!0),n.docChanges().forEach((function(e){var r,n,i,a=Object(M.fromDocumentSnapshot)(e.doc,t);if(a)switch(e.type){case"added":null===(r=o.added)||void 0===r||r.push(a);case"modified":null===(n=o.updated)||void 0===n||n.push(a);case"removed":null===(i=o.removed)||void 0===i||i.push(a)}})),e(o)}},e.prototype.buildQuery=function(e,t){void 0===t&&(t=ie);var r=e;return void 0===t.includeDeleted&&(t.includeDeleted=ie.includeDeleted),void 0===t.onlyDeleted&&(t.onlyDeleted=ie.onlyDeleted),t.includeDeleted?t.onlyDeleted&&(r=r.where("deleted","==",!0)):r=r.where("deleted","==",!1),t.pagination&&(r=r.limit(t.pagination.limit).orderBy(t.pagination.orderBy,t.pagination.sortDirection),t.pagination.startAfter?r=r.startAfter(t.pagination.startAfter):t.pagination.startAt?r=r.startAt(t.pagination.startAt):t.pagination.endAt?r=r.endAt(t.pagination.endAt):t.pagination.endBefore&&r.endBefore(t.pagination.endBefore)),r},e.prototype.executeQuery=function(e,t,r){return void 0===r&&(r=ie),q(this,void 0,Promise,(function(){var n,i,o,a;return X(this,(function(s){switch(s.label){case 0:n=this.buildQuery(e,r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.get()];case 2:return i=s.sent(),o=i.size,[2,{results:Object(M.fromQuerySnapshot)(i,t),size:o}];case 3:return a=s.sent(),re.error("Failed to execute query",a),a.message&&-1!==a.message.indexOf("The query requires an index")&&(O("index-needed",{title:"An index needs to be created",message:a.message}),I("index-needed")),[2,{results:[],size:0}];case 4:return[2]}}))}))},e.prototype.observeQuery=function(e,t,r){var n=this.buildQuery(e,r),i=[];return n.onSnapshot((function(e){e.empty&&r.onData(i),e.docChanges().forEach((function(e){if(e&&e.doc){var n=Object(M.fromQueryDocumentSnapshot)(e.doc,t);n&&("added"!==e.type&&("removed"===e.type&&(i.splice(e.oldIndex,1),r.onRemoved&&r.onRemoved(n)),"modified"===e.type&&(e.newIndex>=0&&i.splice(e.newIndex,1,n),r.onModified&&r.onModified(n))),"added"===e.type&&(i.splice(e.newIndex,0,n),r.onAdded&&r.onAdded(n)))}})),r.onData(i)}),(function(e){re.error("Error getting snapshot | queryName="+r.queryName,e.message),e.message.includes("The query requires an index")&&(O("index-needed",{title:"An index needs to be created",message:e.message}),I("index-needed"))}))},e.prototype.delete=function(e,t){return q(this,void 0,Promise,(function(){var r;return X(this,(function(n){switch(n.label){case 0:return[4,this.getById(e,t)];case 1:return!(r=n.sent())||r.deleted?[3,3]:(r.deleted=!0,r.deletedAt=new Date,[4,this.save(r)]);case 2:return n.sent(),[3,4];case 3:r&&r.deleted?re.warn("Model is already deleted. Not performing any action"):re.warn("No object found for given id. Not deleting anything."),n.label=4;case 4:return[2,r]}}))}))},e.sharedInstance=new e,e}(),ae=r(2),se=(r(70),r(37)),ue=r(4);new o.a("DateUtil.ts");function ce(e){var t=e%60;return t<15?0:t<30?15:t<45?30:45}var le,de,fe,pe=r(7),me=((le={})[pe.SubscriptionTier.BASIC]=0,le[pe.SubscriptionTier.PLUS]=1,le[pe.SubscriptionTier.PREMIUM]=2,j.BillingPeriod.never,j.BillingPeriod.once,j.BillingPeriod.weekly,j.BillingPeriod.monthly,j.BillingPeriod.yearly,[pe.SubscriptionTier.PLUS,pe.SubscriptionTier.PREMIUM]);!function(e){e.USER_CANCELED="USER_CANCELED",e.EXPIRED="EXPIRED",e.SYSTEM_CANCELED="SYSTEM_CANCELED",e.UNKNOWN="UNKNOWN",e.UNAVAILABLE="UNAVAILABLE",e.USER_DELETED="USER_DELETED"}(de||(de={})),function(e){e.STRIPE="STRIPE",e.APPLE="APPLE",e.GOOGLE="GOOGLE"}(fe||(fe={}));var he,ve,ye,Ae,be=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.PREMIUM="PREMIUM",e.NONE="NONE",e.TESTER="TESTER"}(he||(he={})),function(e){e.NOT_SET="NOT_SET",e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"}(ve||(ve={})),function(e){e.email="email",e.push="push"}(ye||(ye={})),function(e){e.firstName="firstName",e.lastName="lastName",e.email="email",e.userId="userId",e.signupAt="signupAt",e.lastSyncedAt="lastSyncedAt",e.mailchimpListMemberId="mailchimpListMember.id",e.mailchimpListMemberUniqueEmailId="mailchimpListMember.unique_email_id",e.mailchimpListMemberWebId="mailchimpListMember.web_id",e.journalStatus="journalStatus",e.fcmTokens="fcmTokens",e.signupConfirmedAt="signupConfirmedAt",e.lastJournalEntryAt="lastJournalEntryAt",e.unsubscribedAt="unsubscribedAt",e.stats="stats",e.stats_reflections="reflections",e.activityStatus="activityStatus",e.promptSendTime="promptSendTime",e.timeZone="timeZone",e.promptSendTimeUTC="promptSendTimeUTC",e.promptSendTimeUTC_hour="promptSendTimeUTC.hour",e.promptSendTimeUTC_minute="promptSendTimeUTC.minute",e.subscription="subscription",e.subscriptionTier="subscription.tier",e.subscriptionTrialEndsAt="subscription.trial.endsAt",e.subscriptionStripeId="subscription.stripeSubscriptionId",e.subscriptionCancellation="subscription.cancellation",e.subscriptionCancellationAccessEndsAt="subscription.cancellation.accessEndsAt",e.subscriptionCancellationInitiatedAt="subscription.cancellation.userInitiatedAt",e.subscriptionActivated="subscription.activated",e.subscriptionCanceledAccessEndsAt="subscription.cancellation.accessEndsAt",e.subscriptionOptOutTrialStartedAt="subscription.optOutTrial.startedAt",e.subscriptionOptOutTrialEndsAt="subscription.optOutTrial.endsAt",e.stripeCustomerId="stripe.customerId",e.coreValues="coreValues",e.focusElement="focusElement",e.lastReplyAt="lastReplyAt"}(Ae||(Ae={}));var ge,Ee,Se,Te,_e,Ie=function(e){function t(){var t,r=null!==e&&e.apply(this,arguments)||this;return r.collection=Z.Collection.members,r.journalStatus=he.NONE,r.notificationSettings=((t={})[ye.email]=ve.ACTIVE,t[ye.push]=ve.NOT_SET,t),r.promptSendTimeUTC=r.getDefaultPromptSendTimeUTC(),r.signupQueryParams={},r.stats={},r.activityStatus={},r.stripe={},r}return be(t,e),t.prototype.toMemberData=function(){return this.toJSON()},t.prototype.decodeJSON=function(t){var r,n,i;e.prototype.decodeJSON.call(this,t);var o=null===(r=this.subscription)||void 0===r?void 0:r.optOutTrial;o&&(o.endsAt=this.decodeDate(o.endsAt),o.startedAt=this.decodeDate(o.startedAt));var a=null===(n=this.subscription)||void 0===n?void 0:n.trial;a&&(a.activatedAt=this.decodeDate(a.activatedAt),a.endsAt=this.decodeDate(a.endsAt));var s=null===(i=this.subscription)||void 0===i?void 0:i.cancellation;s&&(s.accessEndsAt=this.decodeDate(s.accessEndsAt),s.processedAt=this.decodeDate(s.processedAt),s.initiatedAt=this.decodeDate(s.initiatedAt)),this.activityStatus&&(this.activityStatus.lastSeenOccurredAt=this.decodeDate(this.activityStatus.lastSeenOccurredAt)),this.unsubscribedAt=this.decodeDate(this.unsubscribedAt),this.signupAt=this.decodeDate(this.signupAt),this.signupConfirmedAt=this.decodeDate(this.signupConfirmedAt),this.lastSyncedAt=this.decodeDate(this.lastSyncedAt),this.lastReplyAt=this.decodeDate(this.lastReplyAt),this.lastJournalEntryAt=this.decodeDate(this.lastJournalEntryAt),this.adminEmailUnsubscribedAt=this.decodeDate(this.adminEmailUnsubscribedAt)},t.fromMemberData=function(e){var r=new t;return r.decodeJSON(e),r},t.prototype.prepareForFirestore=function(){return e.prototype.prepareForFirestore.call(this),this.email=this.email?this.email.toLowerCase().trim():this.email,this.referredByEmail=this.getReferredBy(),this},t.prototype.getSignupSource=function(){if(this.signupQueryParams&&this.signupQueryParams.utm_source)return this.signupQueryParams.utm_source},t.prototype.getSignupMedium=function(){if(this.signupQueryParams&&this.signupQueryParams.utm_medium)return this.signupQueryParams.utm_medium},t.prototype.getSignupCampaign=function(){var e;return null===(e=this.signupQueryParams)||void 0===e?void 0:e.utm_campaign},t.prototype.getReferredBy=function(){return this.referredByEmail?this.referredByEmail:this.mailchimpListMember&&this.mailchimpListMember.merge_fields.REF_EMAIL?this.mailchimpListMember.merge_fields.REF_EMAIL:void 0},t.prototype.getFullName=function(){return((this.firstName||"")+" "+(this.lastName||"")).trim()},t.prototype.getCurrentLocaleDateObject=function(e){return void 0===e&&(e=new Date),this.timeZone?function(e,t){return ae.DateTime.fromJSDate(e).setZone(t).toObject()}(e,this.timeZone):ae.DateTime.local().toObject()},t.prototype.getDefaultPromptSendTimeUTC=function(){return{hour:ae.DateTime.utc().minus({hours:1}).hour,minute:(void 0===e&&(e=new Date),ce(e.getMinutes()))};var e},t.prototype.getLocalPromptSendTimeFromUTC=function(){var e=Object(se.getValidTimezoneName)(this.timeZone);if(this.promptSendTimeUTC&&e){var t=ae.DateTime.utc().set(this.promptSendTimeUTC).setZone(e);return{hour:t.hour,minute:t.minute}}},Object.defineProperty(t.prototype,"tier",{get:function(){var e,t;return null!==(t=null===(e=this.subscription)||void 0===e?void 0:e.tier)&&void 0!==t?t:pe.DEFAULT_SUBSCRIPTION_TIER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tierDisplayName",{get:function(){return function(e,t){void 0===t&&(t=!1);var r=z.getSharedInstance().copy;if(t)return r.common.TRIAL;if(e)switch(e){case pe.SubscriptionTier.BASIC:return r.checkout.TIER_BASIC;case pe.SubscriptionTier.PLUS:return r.checkout.TIER_PLUS;case pe.SubscriptionTier.PREMIUM:return r.checkout.TIER_PREMIUM}}(this.tier,this.isOptInTrialing)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"daysLeftInTrial",{get:function(){var e,t,r,n,i=(null===(t=null===(e=this.subscription)||void 0===e?void 0:e.optOutTrial)||void 0===t?void 0:t.endsAt)||(null===(n=null===(r=this.subscription)||void 0===r?void 0:r.trial)||void 0===n?void 0:n.endsAt);return i?Math.max(function(e){var t=ae.DateTime.fromJSDate(e).set({hour:0}),r=ae.Interval.fromDateTimes(ae.DateTime.local(),t).count("days")-1;return Number.isNaN(r)?0:r}(i),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOptInTrialing",{get:function(){return!!(e=this.subscription)&&!(null===(t=null==e?void 0:e.trial)||void 0===t||!t.endsAt)&&!(!me.includes(e.tier)||e.tier===pe.SubscriptionTier.BASIC)&&!(null===(r=e.trial)||void 0===r?void 0:r.activatedAt)&&(null===(n=e.trial)||void 0===n?void 0:n.endsAt)>new Date;var e,t,r,n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOptOutTrialing",{get:function(){return!!(e=this.subscription)&&!(null===(t=null==e?void 0:e.optOutTrial)||void 0===t||!t.endsAt)&&!(!me.includes(e.tier)||e.tier===pe.SubscriptionTier.BASIC)&&(null===(r=e.optOutTrial)||void 0===r?void 0:r.endsAt)>new Date;var e,t,r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needsTrialExpiration",{get:function(){return e=this.subscription,i=null==e?void 0:e.tier,!!((null===(t=null==e?void 0:e.trial)||void 0===t?void 0:t.endsAt)&&i&&me.includes(i))&&!(null===(r=null==e?void 0:e.trial)||void 0===r?void 0:r.activatedAt)&&(null===(n=null==e?void 0:e.trial)||void 0===n?void 0:n.endsAt.getTime())<Date.now();var e,t,r,n,i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasActiveSubscription",{get:function(){return!!this.subscription&&!this.isOptInTrialing&&this.tier!==pe.SubscriptionTier.BASIC},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasUpcomingCancellation",{get:function(){var e,t;return!!(null===(t=null===(e=this.subscription)||void 0===e?void 0:e.cancellation)||void 0===t?void 0:t.accessEndsAt)&&this.subscription.cancellation.accessEndsAt>new Date},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stripeCustomerId",{get:function(){var e;return null===(e=this.stripe)||void 0===e?void 0:e.customerId},set:function(e){var t=this.stripe||{};t.customerId=e,this.stripe=t},enumerable:!1,configurable:!0}),t.prototype.getCoreValueAtIndex=function(e){void 0===e&&(e=0);var t=this.coreValues;if(t&&0!==t.length)return t[e%t.length]},t.Field=Ae,t}(Z.BaseModel),Oe=r(24),Ce=r(71),Ne=r.n(Ce),Pe=r(38),we=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},De=function(e){return"/subscribers/"+e+"/attributes"},Re=function(e){return"/subscribers/"+e};function Me(e){var t=null==e?void 0:e.id;if(e&&t){var r={memberId:t,email:e.email,name:e.getFullName()};return e.stats.reflections&&(r.reflectionCount=e.stats.reflections.totalCount,r.streakDays=e.stats.reflections.currentStreakDays,r.streakWeeks=e.stats.reflections.currentStreakWeeks,r.streakMonths=e.stats.reflections.currentStreakMonths,r.reflectionMinutes=function(e,t){void 0===t&&(t=1);var r=e/1e3/60;return t&&(r=Math.round(r)),r.toFixed(t)}(e.stats.reflections.totalDurationMs)),e.getReferredBy()&&(r.referredBy=e.getReferredBy()),r}}function Ue(e){return e.isAxiosError}!function(e){e.TEST="TEST",e.INITIAL_PURCHASE="INITIAL_PURCHASE",e.NON_RENEWING_PURCHASE="NON_RENEWING_PURCHASE",e.RENEWAL="RENEWAL",e.PRODUCT_CHANGE="PRODUCT_CHANGE",e.CANCELLATION="CANCELLATION",e.BILLING_ISSUE="BILLING_ISSUE",e.SUBSCRIBER_ALIAS="SUBSCRIBER_ALIAS"}(ge||(ge={})),function(e){e.TRIAL="TRIAL",e.INTRO="INTRO",e.NORMAL="NORMAL",e.PROMOTIONAL="PROMOTIONAL"}(Ee||(Ee={})),function(e){e.PLAY_STORE="PLAY_STORE",e.APP_STORE="APP_STORE",e.STRIPE="STRIPE",e.MAC_APP_STORE="MAC_APP_STORE",e.PROMOTIONAL="PROMOTIONAL"}(Se||(Se={})),function(e){e.SANDBOX="SANDBOX",e.PRODUCTION="PRODUCTION"}(Te||(Te={})),function(e){e.UNSUBSCRIBE="UNSUBSCRIBE",e.BILLING_ERROR="BILLING_ERROR",e.DEVELOPER_INITIATED="DEVELOPER_INITIATED",e.PRICE_INCREASE="PRICE_INCREASE",e.CUSTOMER_SUPPORT="CUSTOMER_SUPPORT",e.UNKNOWN="UNKNOWN"}(_e||(_e={}));var Le=function(){return(Le=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Be=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ke=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},je=new o.a("RevenueCatService"),Fe=function(){function e(){var e=D.Config.revenueCatApiKey;this.client=Ne.a.create({baseURL:"https://api.revenuecat.com/v1",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})}return e.prototype.updateLastSeen=function(e){return Be(this,void 0,void 0,(function(){var t,r,n,i;return ke(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(t=null==e?void 0:e.id)?(r=Object(Oe.getAppType)(),n=function(e){var t;switch(e){case Pe.AppType.WEB:t="web";break;case Pe.AppType.ANDROID:t="android";break;case Pe.AppType.IOS:t="ios"}if(t)return{"X-Platform":t}}(r),[4,this.client.get(Re(t),{headers:Le({},n)})]):[2];case 1:return o.sent(),[4,this.updateAttributes(e)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),je.error("Unexpected error when updating RevenueCat member activity",i),[3,4];case 4:return[2]}}))}))},e.prototype.updateAttributes=function(e){var t,r;return Be(this,void 0,Promise,(function(){var n,i,o,a,s;return ke(this,(function(u){switch(u.label){case 0:if(!(n=null==e?void 0:e.id))return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),i=De(n),o=Me(e),(a=function(e){if(e){e.memberId;var t=e.email,r=e.name,n=we(e,["memberId","email","name"]),i={};return t&&(i.$email={value:t}),r&&(i.$displayName={value:r}),Object.keys(n).forEach((function(e){var t=n[e];if(Object(ue.isNull)(i))t=null;else if(t=""+t,Object(A.isBlank)(t))return;i[e]={value:t}})),i}}(o))?[4,this.client.post(i,{attributes:a})]:[2];case 2:return u.sent(),[3,4];case 3:return Ue(s=u.sent())?je.error("Failed to update RevenueCat user attributes",null!==(r=null===(t=s.response)||void 0===t?void 0:t.data)&&void 0!==r?r:s):je.error("Failed to update RevenueCat user attributes",s),[3,4];case 4:return[2]}}))}))},e.shared=new e,e}();function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ge=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},He=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},We=new o.a("CactusMemberService"),Ke=(function(){function e(){var e=this;this.firestoreService=oe.sharedInstance,this.memberHasLoaded=!1,this.authUnsubscriber=V().onAuthStateChanged((function(t){return Ge(e,void 0,void 0,(function(){var e=this;return He(this,(function(r){return this.currentMemberUnsubscriber&&this.currentMemberUnsubscriber(),this.currentUser=t,t?this.currentMemberUnsubscriber=this.observeByUserId(t.uid,{onData:function(t){return Ge(e,void 0,void 0,(function(){return He(this,(function(e){switch(e.label){case 0:return this.currentMember=t,this.memberHasLoaded=!0,t?[4,Promise.all([this.updateMemberSettingsIfNeeded(t),Fe.shared.updateLastSeen(t)])]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}}):this.currentMember=void 0,[2]}))}))}))}Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return!!this.currentMember},enumerable:!1,configurable:!0}),e.prototype.updateMemberSettingsIfNeeded=function(e){var t,r,n;return Ge(this,void 0,Promise,(function(){var i,o,a,s,u,c;return He(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),e?(i=Object(Oe.getDeviceTimeZone)(),o=Object(Oe.getDeviceLocale)(),a=!1,i&&!e.timeZone&&(e.timeZone=i,a=!0),o&&!e.locale&&(e.locale=o,a=!0),s=B.a.getString(L.LocalStorageKey.androidFCMToken),u=null!==(t=e.fcmTokens)&&void 0!==t?t:[],s&&!u.includes(s)&&(console.log("Adding FCM token to member"),u.push(s),e.fcmTokens=u,B.a.removeItem(L.LocalStorageKey.androidFCMToken),a=!0),a?(We.log("[update settings if needed] member trial started at type of = ",xe(null===(n=null===(r=e.subscription)||void 0===r?void 0:r.trial)||void 0===n?void 0:n.startedAt)),We.log("Updating member settings for member",e),[4,this.save(e)]):[3,2]):[2];case 1:l.sent(),l.label=2;case 2:return[3,4];case 3:return c=l.sent(),We.error("Failed to update member settings, an unexpected error occurred",c),[2];case 4:return[2]}}))}))},e.prototype.registerFCMToken=function(e){var t;return Ge(this,void 0,void 0,(function(){var r,n;return He(this,(function(i){switch(i.label){case 0:return(r=this.currentMember)?Object(Oe.isAndroidApp)()?(n=null!==(t=r.fcmTokens)&&void 0!==t?t:[]).includes(e)?[3,2]:(n.push(e),r.fcmTokens=n,[4,this.save(r)]):(We.warn("User agent not allowed: "+Object(Oe.getUserAgent)()),[2]):(We.info("No cactus member found, not registering token"),[2]);case 1:i.sent(),B.a.removeItem(L.LocalStorageKey.androidFCMToken),We.info("Saved token to member"),i.label=2;case 2:return[2]}}))}))},e.prototype.getCurrentMember=function(){return Ge(this,void 0,Promise,(function(){var e=this;return He(this,(function(t){return this.currentMember?[2,this.currentMember]:[2,new Promise((function(t){var r=V().onAuthStateChanged((function(n){return Ge(e,void 0,void 0,(function(){var e;return He(this,(function(i){switch(i.label){case 0:return r(),this.currentUser=n,n?[4,this.getByUserId(n.uid)]:[3,2];case 1:return e=i.sent(),this.currentMember=e,this.memberHasLoaded=!0,t(e),[3,3];case 2:t(void 0),i.label=3;case 3:return[2]}}))}))}))}))]}))}))},e.prototype.getCollectionRef=function(){return this.firestoreService.getCollectionRef(Z.Collection.members)},e.prototype.getMemberRef=function(e){if(null==e?void 0:e.id)return this.getCollectionRef().doc(e.id)},e.prototype.executeQuery=function(e){return Ge(this,void 0,void 0,(function(){return He(this,(function(t){return[2,this.firestoreService.executeQuery(e,Ie)]}))}))},e.prototype.getFirst=function(e){return Ge(this,void 0,void 0,(function(){return He(this,(function(t){return[2,this.firestoreService.getFirst(e,Ie)]}))}))},e.prototype.save=function(e){return Ge(this,void 0,Promise,(function(){return He(this,(function(t){return[2,this.firestoreService.save(e)]}))}))},e.prototype.getById=function(e){return Ge(this,void 0,Promise,(function(){return He(this,(function(t){switch(t.label){case 0:return[4,this.firestoreService.getById(e,Ie)];case 1:return[2,t.sent()]}}))}))},e.prototype.observeByUserId=function(e,t){var r=this.getCollectionRef().where(Ae.userId,"==",e);return this.firestoreService.observeFirst(r,Ie,t)},e.prototype.getByUserId=function(e){return Ge(this,void 0,Promise,(function(){var t;return He(this,(function(r){switch(r.label){case 0:return t=this.getCollectionRef().where(Ae.userId,"==",e),[4,this.getFirst(t)];case 1:return[2,r.sent()]}}))}))},e.prototype.observeCurrentMember=function(e){var t,r,n=this;this.memberHasLoaded&&e.onData({member:this.currentMember,user:null!==(t=this.currentUser)&&void 0!==t?t:void 0});var i=V().onAuthStateChanged((function(t){return Ge(n,void 0,void 0,(function(){return He(this,(function(n){return r&&(r(),r=void 0),t?r=this.observeByUserId(t.uid,{onData:function(r){e.onData({user:t,member:r})}}):e.onData({user:void 0,member:void 0}),[2]}))}))}));return function(){i(),r&&r()}},e.prototype.setFocusElement=function(e){var t;return Ge(this,void 0,Promise,(function(){var r,n,i;return He(this,(function(o){switch(o.label){case 0:return r=null!==(t=e.member)&&void 0!==t?t:this.currentMember,(n=this.getMemberRef(r))?[4,n.update((i={},i[Ie.Field.focusElement]=e.element,i))]:[2];case 1:return o.sent(),[2]}}))}))},e.sharedInstance=new e}(),new o.a("Analytics.ts"),null),ze=Je();function Je(){return Ke||(window.dataLayer=window.dataLayer||[],Ke=function(){window.dataLayer.push(arguments)}),Ke}var Ye=new o.a("WordBubbleEmbedPage"),Ve=C(w.QueryParam.CHART_DATA),Qe=Ve?JSON.parse(atob(Ve)):[];console.log("initial words",Qe);var Ze=new(function(){function e(){this._words=[],this.blurred=!0,this.loaded=!1}return Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},set:function(e){var t;this._delegate=e,null===(t=this.delegate)||void 0===t||t.onData(this.words)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"words",{get:function(){return this._words},set:function(e){var t;this._words=e||[],this.loaded=!0,null===(t=this.delegate)||void 0===t||t.onData(this._words)},enumerable:!1,configurable:!0}),e}());Qe&&Qe.length&&(Ze.words=Qe),window.fireShowMeAnalyticsEvent=function(){ze("event","revealed_insight",{event_category:"prompt_content",event_label:"word_chart"})},window.unlockInsights=function(){Ze.blurred=!1,window.fireShowMeAnalyticsEvent()},window.lockInsights=function(){Ze.blurred=!0},window.setInsightWords=function(e){console.log("Setting words ",e),e&&Array.isArray(e)?Ze.words=e:console.warn("An array was not passed")},window.setInsightWordsBase64=function(e){if(e){var t=atob(e),r=JSON.parse(t);Ye.info("Decoded base64 string into words array",r),r&&Array.isArray(r)&&(Ze.words=r)}};var qe=n.a.extend({name:"InsightsEmbedPage",components:{WordChart:y},data:function(){return{dataSource:Ze}},beforeMount:function(){document.body.classList.add("transparent"),Ze.delegate={onData:function(e){Ye.info("Fetched words from data source",e)}}},destroyed:function(){document.body.classList.remove("transparent")}}),Xe=(r(122),Object(v.a)(qe,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container",style:{display:"flex",flex:1,justifyItems:"stretch",alignItems:"stretch"}},[t("transition",{attrs:{name:"fade-in"}},[this.dataSource.loaded?t("WordChart",{staticStyle:{flex:"1"},attrs:{words:this.dataSource.words,blurry:this.dataSource.blurred}}):this._e()],1)],1)}),[],!1,null,null,null).exports);new n.a({template:"\n        <WordBubbleEmbedPage/>\n    ",components:{WordBubbleEmbedPage:Xe}}).$mount("#app")},13:function(e,t,r){"use strict";r.r(t),r.d(t,"Config",(function(){return n}));var n={appCustomScheme:"app.cactus",googleAnalyticsID:"UA-127159143-5",googleOptimizeID:"GTM-KFBRFFG",facebookPixelID:"1422468787913495",firebase:{apiKey:"AIzaSyDu_-z20lelwf58ZtPurwNagHL0UBdMb4U",authDomain:"cactus.app",databaseURL:"https://cactus-app-prod.firebaseio.com",projectId:"cactus-app-prod",storageBucket:"cactus-app-prod.appspot.com",messagingSenderId:"654981460803",appId:"1:654981460803:web:183ae7005e0dd805",measurementId:"G-S2ETMEEEVJ"},flamelinkFirebaseConfig:{apiKey:"AIzaSyDu_-z20lelwf58ZtPurwNagHL0UBdMb4U",authDomain:"cactus.app",databaseURL:"https://cactus-app-prod.firebaseio.com",projectId:"cactus-app-prod",storageBucket:"cactus-app-prod.appspot.com",messagingSenderId:"654981460803",appId:"1:654981460803:web:183ae7005e0dd805",measurementId:"G-S2ETMEEEVJ"},flamelinkEnvironmentId:"production",firstPromptId:"nIVmhvgppLNgNMAsWEb0",cloudSpongeKey:"PwpSNjcoLLh9EdPmpKxXVw",appStoreUrl:"https://apps.apple.com/us/app/cactus-mindfulness-journal/id1474513514?ls=1",playStoreUrl:"https://play.google.com/store/apps/details?id=app.cactus",apiDomain:"https://us-central1-cactus-app-prod.cloudfunctions.net",stripe:{apiKey:"pk_live_5jwkYz17Bg1IKuXQvfnbmyGg",monthlyPlanId:"plan_GDkJkQds5AkTz9",yearlyPlanId:"plan_GDkJ9jDqXdj3Pb"},domain:"https://cactus.app",firebaseDynamicLink:{domain:"cactus.app",prefix:"/p"},sentry:{dsn:"https://d41561516bba4e04b0d10a1526c83c27@sentry.io/1490133"},env:"prod",isDev:!1,isStage:!1,isProd:!0,version:"b6690419a20af12e9b2d7c1a40cf63d348d69b91",androidUserAgent:"CactusAndroid",branchLiveKey:"key_live_heLJqNeQvEOgkUX3XUF92hadCFi7uWW0",revenueCatApiKey:"dlWuxUOEBonywlmBlOMQtTfUQGZXAKbJ"}},19:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageKey=void 0;var n=r(8),i=r(3);!function(e){e.emailForSignIn="emailForSignIn",e.emailAutoFill="emailAutoFill",e.newUserSignIn="newUserSignIn",e.referredByEmail="referredByEmail",e.anonReflectionResponse="anonReflectionResponse",e.landingQueryParams="landingQueryParams",e.flamelinkEnvironmentOverride="flamelinkEnvironmentOverride",e.memberStatsEnabled="memberStatsEnabled",e.contactsImportEnabled="contactsImportEnabled",e.activityBadgeCount="activityBadgeCount",e.androidFCMToken="androidFCMToken",e.subscriptionPriceCents="subscriptionPriceCents"}(t.LocalStorageKey||(t.LocalStorageKey={}));var o=new i.default("StorageService.ts"),a=function(){function e(){}return e.clear=function(){try{localStorage.clear()}catch(e){o.error("StorageService Failed to clear storage",e)}},e.removeItem=function(e,t){if(t){var r=this.getEncodedMap(e);delete r[t],o.log("removed "+t+" from ",r),this.saveJSON(e,r)}else localStorage.removeItem(e)},e.buildKey=function(e,t){return e+"_"+t},e.getItem=function(e){try{return localStorage.getItem(e)||void 0}catch(t){return void o.error("Failed to get item "+e+" from local storage")}},e.saveBoolean=function(e,t){localStorage.setItem(e,""+t)},e.getBoolean=function(e,t){void 0===t&&(t=!1);var r=this.getItem(e);return null==r||""===r.trim()?t:"true"===r||!1},e.saveNumber=function(e,t){localStorage.setItem(e,""+t)},e.saveString=function(e,t){localStorage.setItem(e,t)},e.getString=function(e){return localStorage.getItem(e)||void 0},e.getNumber=function(e,t){var r=this.getItem(e);if(null==r||""===r.trim())return t;try{var n=Number(r);if(!isNaN(n))return n}catch(e){o.error("An error occurred while parsing to number for value: ",r)}return t},e.saveJSON=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.getJSON=function(e){return this.getEncodedMap(e)},e.saveModel=function(e,t,r){try{var n=this.getEncodedModelString(t);if(r){var i=this.getEncodedMap(e);i[r]=n,this.saveJSON(e,i)}else localStorage.setItem(e,n)}catch(e){o.error("Failed to save to localstorage",e)}},e.getEncodedModelString=function(e){return this.toBase64(e.toJSON())},e.getEncodedMap=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}},e.getModel=function(e,t,r){try{if(r){var n=this.getEncodedMap(e)[r];return this.getModelFromEncodedString(n,t)}var i=localStorage.getItem(e);return this.getModelFromEncodedString(i,t)}catch(e){o.error("Failed to fetch model from localstorage",e)}},e.getDecodeModelMap=function(e,t){var r=this,n=this.getEncodedMap(e),i={};return Object.keys(n).forEach((function(a){var s=n[a];try{var u=r.getModelFromEncodedString(s,t);u&&(i[a]=u)}catch(t){o.error("StorageService: "+e+": Decoding error for modelId "+a+" ")}})),i},e.getModelFromEncodedString=function(e,t){if(e){var r=JSON.parse(this.fromBase64(e));return n.fromJSON(r,t)}},e.toBase64=function(e){return btoa(JSON.stringify(e))},e.fromBase64=function(e){return atob(e)},e}();t.default=a},21:function(e,t,r){"use strict";r.r(t),r.d(t,"microDollarsStringToCents",(function(){return c})),r.d(t,"removeSpecialCharacters",(function(){return l})),r.d(t,"getFilenameFromInput",(function(){return d})),r.d(t,"preventOrphanedWords",(function(){return f})),r.d(t,"stripQueryParams",(function(){return p})),r.d(t,"isFeatureAuthUrl",(function(){return m})),r.d(t,"appendQueryParams",(function(){return h})),r.d(t,"appendDomain",(function(){return v})),r.d(t,"getUrlFromInput",(function(){return y})),r.d(t,"isValidEmail",(function(){return A})),r.d(t,"isGmail",(function(){return b})),r.d(t,"isExternalUrl",(function(){return g})),r.d(t,"destructureDisplayName",(function(){return E})),r.d(t,"getInitials",(function(){return S})),r.d(t,"toCamelCamse",(function(){return T})),r.d(t,"getResponseText",(function(){return _})),r.d(t,"getWordCount",(function(){return I})),r.d(t,"getCharacterCount",(function(){return O})),r.d(t,"getIntegerFromStringBetween",(function(){return C})),r.d(t,"getPromptQuestion",(function(){return N})),r.d(t,"isBlank",(function(){return P})),r.d(t,"getProviderDisplayName",(function(){return w})),r.d(t,"titleCase",(function(){return D})),r.d(t,"StringTransforms",(function(){return R})),r.d(t,"formatPriceCentsUsd",(function(){return M})),r.d(t,"getRandomNumberBetween",(function(){return U})),r.d(t,"formatPercentage",(function(){return L})),r.d(t,"decodeHTMLEntities",(function(){return k}));var n=r(49),i=r(67),o=r.n(i),a=r(4),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};function c(e){if(Object(a.isString)(e)){var t=Number(e);if(Object(a.isNumber)(t))return t/1e4}}function l(e,t){return e.trim().toLowerCase().replace(/[^a-z0-9-_\s\\\/]/g,"").replace(/[-_\\\/]/g," ").replace(/(\s+)/g,t)}function d(e,t){void 0===t&&(t=void 0);var r=l(e,"_");return t?r+"."+t:r}function f(e,t){if(void 0===t&&(t=" "),!e||"string"!=typeof e)return e;var r=e.lastIndexOf(" "),n=e.lastIndexOf(t);return n>-1&&n>r?e:r>0?e.substr(0,r)+t+e.substr(r+1):e}function p(e){var t=n.parseUrl(e);return{url:t.url,query:t.query}}function m(e){return!(!e||!/\/feature-auth/.test(e))}function h(e,t){if(!t||0===Object.keys(t).length)return e;var r=n.parseUrl(e),i=s(s({},t),r.query);return r.url+"?"+n.stringify(i)}function v(e,t){void 0===t&&(t=void 0);var r=e;if(!r)return"";if(r.includes("://"))return r;r&&0===r.indexOf("/")&&(r=r.slice(1));var n=r;return n.startsWith("/")||(n="/"+n),t&&t.includes("://")?""+t+n:!t||n.startsWith("http")||t.includes("localhost")?t&&!n.startsWith("http")?"http://"+t+n:n:"https://"+t+n}function y(e,t){void 0===t&&(t=void 0);var r=e;if(!r)return"";r&&0===r.indexOf("/")&&(r=r.slice(1));var n=l(r,"-");return n.startsWith("/")||(n="/"+n),!t||n.startsWith("http")||t.includes("localhost")?t&&!n.startsWith("http")?"http://"+t+n:n:"https://"+t+n}function A(e){return/^\w+([\.+-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}function b(e){return/^[a-z0-9](\.?[a-z0-9]){5,}@g(oogle)?mail\.com$/.test(e)}function g(e){return!(!e||P(e))&&new RegExp("^(?:(?:https?|ftp):\\/\\/|\\b(?:[a-z\\d]+\\.))(?:(?:[^\\s()<>]+|\\((?:[^\\s()<>]+|(?:\\([^\\s()<>]+\\)))?\\))+(?:\\((?:[^\\s()<>]+|(?:\\(?:[^\\s()<>]+\\)))?\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))?").test(e)}function E(e){if(!e)return{};var t=e.trim().replace(/\s\s+/g," ").split(" ");if(t.length<3){var r=u(t,2);return{firstName:r[0],lastName:r[1]}}if(3===t.length){var n=u(t,3);return{firstName:n[0],middleName:n[1],lastName:n[2]}}return t.length>3?{firstName:u(t,1)[0],lastName:t[t.length-1]}:{}}function S(e){if(!e)return"";var t=E(e),r=t.firstName,n=t.lastName,i="";return r&&(i+=r.charAt(0)),n&&(i+=n.charAt(0)),i}function T(e){return o()(e)}function _(e){if(e&&0!==e.length)return e.map((function(e){return(e.content.text||"").trim()})).join("\n\n").trim()}function I(e){return e&&e.trim()?e.trim().split(/\s+/g).length:0}function O(e){return e?e.trim().length:0}function C(e,t){for(var r=0,n=0;n<e.length;n++)r=Math.abs(e.charCodeAt(n)+((r<<5)-r));return r%t}function N(e){var t=e.prompt,r=e.promptContent,n=e.response,i=(null==r?void 0:r.getQuestion())||(null==t?void 0:t.question)||(null==n?void 0:n.promptQuestion)||void 0;if(i&&!P(i))return i.trim()}function P(e){return!e||!e.trim()}function w(e){switch(e){case"password":return"Email";case"twitter.com":return"Twitter";case"facebook.com":return"Facebook";case"google.com":return"Google";case"apple.com":return"Apple";default:return e||""}}function D(e){return e&&e.length>0?e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" "):""}var R={stringOrUndefined:function(e){return P(e)?void 0:e},numberOrUndefined:function(e){return Object(a.isNumber)(e)?void 0:Number(e)},booleanOrUndefined:function(e){if(!P(e))return e.toLowerCase().startsWith("t")},dateOrUndefined:function(e){if(!P(e))try{return new Date(e)}catch(e){return}}};function M(e){return("$"+(e/100).toFixed(2)).replace(".00","")}function U(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=!0);var i=Math.pow(10,Math.max(r,0)),o=t*i,a=e*i,s=n?1:0;return(Math.floor(Math.random()*(o-a+s))+a)/i}function L(e,t){if(void 0===t&&(t=0),Object(a.isNull)(e))return null;var r=Number(e);return Object(a.isNumber)(r)?(100*r).toFixed(t)+"%":null}var B=[["amp","&"],["apos","'"],["#x27","'"],["#x2F","/"],["#39","'"],["#47","/"],["lt","<"],["gt",">"],["nbsp"," "],["quot",'"']];function k(e){if(e){for(var t=e,r=0,n=B.length;r<n;++r)t=t.replace(new RegExp("&"+B[r][0]+";","g"),B[r][1]);return t}}},24:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppType=t.isAndroidApp=t.isIosDevice=t.isAndroidDevice=t.getUserAgent=t.getDeviceLocale=t.getDeviceTimeZone=t.isPreRender=t.getDeviceDimensions=t.MOBILE_BREAKPOINT_PX=void 0;var n=r(3),i=r(13),o=r(37),a=r(38);t.MOBILE_BREAKPOINT_PX=600;var s=new n.default("DeviceUtil");function u(){return navigator.userAgent}function c(){return navigator.userAgent===i.Config.androidUserAgent}t.getDeviceDimensions=function(){return{height:window.innerHeight,width:window.innerWidth}},t.isPreRender=function(){return(u()||"").toLowerCase().includes("prerender")},t.getDeviceTimeZone=function(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone,t=o.getValidTimezoneName(e);return s.info("Device Timezone = '"+e+"'. Converted to valid timezone = '"+t+"'"),t}catch(e){return void s.error("Unable to fetch timezone from device. The 'Intl' API may not be supported")}},t.getDeviceLocale=function(){try{var e=Intl.DateTimeFormat().resolvedOptions().locale;return s.info("device locale",e),e}catch(e){s.error("Unable to fetch timezone from device. The 'Intl' API may not be supported")}},t.getUserAgent=u,t.isAndroidDevice=function(){return new RegExp("android","i").test(u())},t.isIosDevice=function(){return/iPad|iPhone|iPod/.test(u())&&!window.MSStream},t.isAndroidApp=c,t.getAppType=function(){return c()?a.AppType.ANDROID:a.AppType.WEB}},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=t.BaseModelField=t.Collection=void 0;var n=r(8),i=r(3),o=r(4),a=new i.default("FirestoreBaseModels");!function(e){e.emailReply="emailReply",e.testModels="testModels",e.sentCampaigns="sentCampaigns",e.reflectionResponses="reflectionResponses",e.users="users",e.members="members",e.reflectionPrompt="reflectionPrompt",e.sentPrompts="sentPrompts",e.pendingUsers="pendingUsers",e.socialInvites="socialInvites",e.socialConnections="socialConnections",e.memberProfiles="memberProfiles",e.socialConnectionRequests="socialConnectionRequests",e.flamelink_content="fl_content",e.checkoutSessions="checkoutSessions",e.payments="payments",e.emailLogs="emailLogs",e.dataExports="dataExports",e.coreValuesAssessmentResponses="coreValuesAssessmentResponses",e.deletedUsers="deletedUsers",e.gapAnalysisAssessmentResults="gapAnalysisAssessmentResults",e.notifications="notifications"}(t.Collection||(t.Collection={})),function(e){e.id="id",e.createdAt="createdAt",e.updatedAt="updatedAt",e.deleted="deleted",e.deletedAt="deletedAt"}(t.BaseModelField||(t.BaseModelField={}));var s=function(){function e(){this.deleted=!1}return e.prototype.prepareForFirestore=function(){return this},e.prototype.prepareFromFirestore=function(e){return this},e.prototype.toFirestoreData=function(e){void 0===e&&(e=["id","collection"]);var t=this.prepareForFirestore();if(!t)throw new Error("Unable to prepare for firestore");var r=n.convertDateToTimestamp(t);return e&&r&&e.forEach((function(e){delete r[e]})),r=o.toPlainObject(r),Object.keys(r).forEach((function(e){void 0===r[e]&&delete r[e]})),r},e.prototype.toJSON=function(e){void 0===e&&(e=["collection"]);try{var t=Object.assign({},this),r=n.convertDateToJSON(t),i=Array.isArray(e)?e:["collection"];return i&&Array.isArray(i)&&r&&i.forEach((function(e){delete r[e]})),r}catch(e){return a.error("Error processing this model toJSON",e),{message:"Error processing this model toJSON",error:e}}},e.prototype.decodeJSON=function(e){Object.assign(this,e),this.createdAt=this.decodeDate(e.createdAt),this.updatedAt=this.decodeDate(e.updatedAt),this.deletedAt=this.decodeDate(e.deletedAt)},e.prototype.decodeDate=function(e){if(e)try{var t=new Date(e);if(isNaN(t.getTime()))return;return t}catch(e){return}},e}();t.BaseModel=s},3:function(e,t,r){"use strict";(function(e){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t){"string"==typeof t?(this.fileName=t,this.serverName=e.env.FUNCTION_NAME||e.env.K_SERVICE||void 0):(this.fileName=t.fileName,this.serverName=t.serverName)}return Object.defineProperty(t.prototype,"prefix",{get:function(){return this.getDateString()+" ["+(this.serverName?this.serverName+".":"")+this.fileName+"]"},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.debug.apply(console,r)},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.info.apply(this,n(e))},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.log.apply(console,r)},t.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.warn.apply(console,r)},t.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.error.apply(console,r)},t.prototype.getDateString=function(){return(new Date).toISOString()},t}();t.default=i}).call(this,r(26))},37:function(e,t,r){"use strict";r.r(t),r.d(t,"KNOWN_ZONES",(function(){return s})),r.d(t,"deprecatedTimezoneMap",(function(){return u})),r.d(t,"zoneToDisplayName",(function(){return c})),r.d(t,"luxonValidTimezones",(function(){return l})),r.d(t,"timezoneInfoList",(function(){return d})),r.d(t,"zonesInfoByName",(function(){return f})),r.d(t,"getCanonicalName",(function(){return p})),r.d(t,"getValidTimezoneName",(function(){return m})),r.d(t,"findByZoneName",(function(){return h})),r.d(t,"gmtIsUtc",(function(){return v})),r.d(t,"isZoneSameTime",(function(){return y}));var n=r(2),i=r(3),o=new(r.n(i).a)("timezones.ts"),a=["Etc/GMT+12","Pacific/Midway","Pacific/Honolulu","America/Juneau","America/Dawson","America/Denver","America/Chihuahua","America/Phoenix","America/Chicago","America/Regina","America/Mexico_City","America/Belize","America/Detroit","America/Indiana/Indianapolis","America/Bogota","America/Noronha","America/Glace_Bay","America/Caracas","America/Santiago","America/St_Johns","America/Sao_Paulo","America/Argentina/Buenos_Aires","America/Godthab","Etc/GMT+2","Atlantic/Azores","Atlantic/Cape_Verde","GMT","Africa/Casablanca","Atlantic/Canary","Europe/London","Pacific/Easter","Etc/GMT","Etc/UTC","Pacific/Chatham","America/Adak","Europe/Belgrade","Europe/Sarajevo","Europe/Brussels","Europe/Amsterdam","Africa/Algiers","Europe/Bucharest","Africa/Cairo","Europe/Helsinki","Europe/Athens","Asia/Jerusalem","Africa/Harare","Europe/Moscow","Asia/Kuwait","Africa/Nairobi","Asia/Baghdad","Asia/Tehran","Asia/Dubai","Asia/Baku","Asia/Kabul","Asia/Yekaterinburg","Asia/Karachi","Asia/Kolkata","Asia/Kathmandu","Asia/Dhaka","Asia/Colombo","Asia/Almaty","Asia/Rangoon","Asia/Bangkok","Asia/Krasnoyarsk","Asia/Shanghai","Asia/Kuala_Lumpur","Asia/Taipei","Australia/Perth","Asia/Irkutsk","Asia/Seoul","Asia/Tokyo","Asia/Yakutsk","Australia/Darwin","Australia/Adelaide","Australia/Sydney","Australia/Brisbane","Australia/Hobart","Asia/Vladivostok","Australia/Lord_Howe","Pacific/Guam","Asia/Magadan","Pacific/Fiji","Pacific/Auckland","Pacific/Tongatapu"],s=a,u={"Australia/ACT":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse",CET:"Europe/Paris","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",CST6CDT:"America/Chicago",Cuba:"America/Havana",EET:"Europe/Sofia",Egypt:"Africa/Cairo",Eire:"Europe/Dublin",EST:"America/Cancun",EST5EDT:"America/New_York",GB:"Europe/London",GMT0:"Etc/GMT",Greenwich:"Etc/GMT",Hongkong:"Asia/Hong_Kong",HST:"Pacific/Honolulu",Iceland:"Atlantic/Reykjavik",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli",MET:"Europe/Paris","GMT-0":"Etc/GMT","GB-Eire":"Europe/London","GMT+0":"Etc/GMT","Etc/Greenwich":"Etc/GMT","Etc/Universal":"Etc/UTC","Etc/Zulu":"Etc/UTC","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",MST:"America/Phoenix",MST7MDT:"America/Denver",Navajo:"America/Denver",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",PRC:"Asia/Shanghai",PST8PDT:"America/Los_Angeles",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul",UCT:"Etc/UTC",Universal:"Etc/UTC","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/Eastern":"America/New_York","US/East-Indiana":"America/Indiana/Indianapolis","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Pacific-New":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago",WET:"Europe/Lisbon","W-SU":"Europe/Moscow",Zulu:"Etc/UTC"},c={"Etc/GMT+12":"International Date Line West","Pacific/Midway":"Midway Island, Samoa","Pacific/Honolulu":"Hawaii","America/Juneau":"Alaska","America/Dawson":"Pacific Time (US and Canada); Tijuana","America/Denver":"Mountain Time (US and Canada)","America/Chihuahua":"Chihuahua, La Paz, Mazatlan","America/Phoenix":"Arizona","America/Chicago":"Central Time (US and Canada)","America/Regina":"Saskatchewan","America/Mexico_City":"Guadalajara, Mexico City, Monterrey","America/Belize":"Central America","America/Detroit":"Eastern Time (US and Canada)","America/Indiana/Indianapolis":"Indiana (East)","America/Bogota":"Bogota, Lima, Quito","America/Glace_Bay":"Atlantic Time (Canada)","America/Caracas":"Caracas, La Paz","America/Santiago":"Santiago","America/St_Johns":"Newfoundland and Labrador","America/Sao_Paulo":"Brasilia","America/Argentina/Buenos_Aires":"Buenos Aires, Georgetown","America/Godthab":"Greenland","America/Noronha":"Pernambuco, Brazil","Etc/GMT+2":"Mid-Atlantic","Atlantic/Azores":"Azores","Atlantic/Cape_Verde":"Cape Verde Islands",GMT:"Dublin, Edinburgh, Lisbon, London","Africa/Casablanca":"Casablanca, Monrovia","Atlantic/Canary":"Canary Islands","Europe/Belgrade":"Belgrade, Bratislava, Budapest, Ljubljana, Prague","Europe/Sarajevo":"Sarajevo, Skopje, Warsaw, Zagreb","Europe/Brussels":"Brussels, Copenhagen, Madrid, Paris","Europe/Amsterdam":"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","Africa/Algiers":"West Central Africa","Europe/Bucharest":"Bucharest","Africa/Cairo":"Cairo","Europe/Helsinki":"Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius","Europe/Athens":"Athens, Istanbul, Minsk","Asia/Jerusalem":"Jerusalem","Africa/Harare":"Harare, Pretoria","Europe/Moscow":"Moscow, St. Petersburg, Volgograd","Asia/Kuwait":"Kuwait, Riyadh","Africa/Nairobi":"Nairobi","Asia/Baghdad":"Baghdad","Asia/Tehran":"Tehran","Asia/Dubai":"Abu Dhabi, Muscat","Asia/Baku":"Baku, Tbilisi, Yerevan","Asia/Kabul":"Kabul","Asia/Yekaterinburg":"Ekaterinburg","Asia/Karachi":"Islamabad, Karachi, Tashkent","Asia/Kolkata":"Chennai, Kolkata, Mumbai, New Delhi","Asia/Kathmandu":"Kathmandu","Asia/Dhaka":"Astana, Dhaka","Asia/Colombo":"Sri Jayawardenepura","Asia/Almaty":"Almaty, Novosibirsk","Asia/Rangoon":"Yangon Rangoon","Asia/Bangkok":"Bangkok, Hanoi, Jakarta","Asia/Krasnoyarsk":"Krasnoyarsk","Asia/Shanghai":"Beijing, Chongqing, Hong Kong SAR, Urumqi","Asia/Kuala_Lumpur":"Kuala Lumpur, Singapore","Asia/Taipei":"Taipei","Australia/Perth":"Perth","Asia/Irkutsk":"Irkutsk, Ulaanbaatar","Asia/Seoul":"Seoul","Asia/Tokyo":"Osaka, Sapporo, Tokyo","Asia/Yakutsk":"Yakutsk","Australia/Darwin":"Darwin","Australia/Adelaide":"Adelaide","Australia/Sydney":"Canberra, Melbourne, Sydney","Australia/Brisbane":"Brisbane","Australia/Hobart":"Hobart","Asia/Vladivostok":"Vladivostok","Pacific/Guam":"Guam, Port Moresby","Asia/Magadan":"Magadan, Solomon Islands, New Caledonia","Pacific/Fiji":"Fiji Islands, Kamchatka, Marshall Islands","Pacific/Auckland":"Auckland, Wellington","Pacific/Tongatapu":"Nuku'alofa"},l=a.filter((function(e){return n.DateTime.local().setZone(e).isValid})),d=l.map((function(e){var t=n.DateTime.local().setZone(e),r=t.offset,i="GMT"+t.toFormat("ZZ");return{displayName:c[e],offsetMinutes:r,zoneName:e,offsetDisplay:i}})).sort((function(e,t){return t.offsetMinutes-e.offsetMinutes})),f=d.reduce((function(e,t){return e[t.zoneName]=t,e}),{});function p(e){if(e){var t=u[e];return t||e}}function m(e){if(e){var t=p(e);if(t)return n.DateTime.local().setZone(t).isValid?t:void 0}}function h(e){var t=p(e);if(t){var r=f[t];if(r)return r;var n=t.split("/")[0],i=a.filter((function(e){return e.startsWith(n)}));o.log("zone options",i);var s=i.find((function(e){return y(e,t)}));return o.log("matched timezone: ",s),s?f[s]:void 0}}function v(e,t){return!("Etc/GMT+0"!==e&&"Etc/GMT-0"!==e&&"Etc/UTC"!==e||"Etc/GMT+0"!==t&&"Etc/GMT-0"!==t&&"Etc/UTC"!==t)}function y(e,t){var r=new Date,n=p(e),i=p(t);if(n===i)return!0;if(!n||!i)return o.info("Unable to determine canonical timezone for zones: "+e+" = "+n+" | zone2 "+t+" = "+i),!1;if(v(n,i))return!0;if((n.startsWith("Etc/GMT")||"Etc/UTC"===n)&&(i.startsWith("Etc/GMT")||"Etc/UTC"===i))return!1;try{var a=r.toLocaleTimeString("en-us",{timeZone:e,timeZoneName:"short"}).split(" "),s=r.toLocaleTimeString("en-us",{timeZoneName:"short",timeZone:t}).split(" ");return a[0]===s[0]&&a[1]===s[1]}catch(r){return o.error("Failed to parse timezone name returning false: zone1 "+e+" = "+n+" | zone2 "+t+" = "+i),!1}}},38:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"AppType",(function(){return n})),function(e){e.WEB="WEB",e.ANDROID="ANDROID",e.IOS="IOS"}(n||(n={}))},4:function(e,t,r){"use strict";r.r(t),r.d(t,"isNonEmptyObject",(function(){return s})),r.d(t,"hasIdField",(function(){return u})),r.d(t,"isArray",(function(){return c})),r.d(t,"isNull",(function(){return l})),r.d(t,"isNotNull",(function(){return d})),r.d(t,"optionalStringToNumber",(function(){return f})),r.d(t,"isDate",(function(){return p})),r.d(t,"isString",(function(){return m})),r.d(t,"isNumber",(function(){return h})),r.d(t,"transformObjectAsync",(function(){return v})),r.d(t,"transformObjectSync",(function(){return y})),r.d(t,"toPlainObject",(function(){return A})),r.d(t,"stringifyJSON",(function(){return b})),r.d(t,"chunkArray",(function(){return g}));var n=r(3),i=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=new(r.n(n).a)("ObjectUtil.ts");function s(e){return!l(e)&&("object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0)}function u(e){var t;return s(e)&&e.hasOwnProperty("id")&&null!==(t=e.id)&&void 0!==t&&t}function c(e){return!l(e)&&Array.isArray(e)}function l(e){return null==e}function d(e){return!l(e)}function f(e){if(!l(e)){var t=Number(e);return h(t)?t:void 0}}function p(e){return d(e)&&e instanceof Date}function m(e){try{return d(e)&&"string"==typeof e}catch(e){return!1}}function h(e){try{return d(Number(e))&&"number"==typeof e&&!isNaN(e)}catch(e){return!1}}function v(e,t){return i(this,void 0,Promise,(function(){var r,n,a=this;return o(this,(function(u){switch(u.label){case 0:return c(e)?(n=e.map((function(e){return v(e,t)})),[4,Promise.all(n)]):[3,2];case 1:return[2,u.sent()];case 2:return[4,t(e)];case 3:return(r=u.sent())!==e?[2,r]:s(e)?(n=Object.keys(e).map((function(r){return i(a,void 0,void 0,(function(){var n,i;return o(this,(function(o){switch(o.label){case 0:return n=e[r],[4,t(n)];case 1:return i=o.sent(),n!==i?[3,3]:[4,v(n,t)];case 2:return n=o.sent(),[3,4];case 3:n=i,o.label=4;case 4:return void 0===n?delete e[r]:e[r]=n,[2]}}))}))})),[4,Promise.all(n)]):[3,5];case 4:u.sent(),u.label=5;case 5:return[2,e]}}))}))}function y(e,t,r,n){if(void 0===r&&(r=0),r>=100)return a.warn("transformObjectSync method reached a depth greater than 10, Current depth = "+r+". Key = "+(n||"rootKey")+" Returning witihout processing"),e;if(c(e))return e.map((function(e){return y(e,t,r+1,n||"root-Array")}));var i=t(e);return i!==e?i:(s(e)&&Object.keys(e).forEach((function(n){var i=e[n];if("_fl_meta_"===n)return i;var o=t(i);void 0===(i=i===o&&(s(i)||Array.isArray(i))?y(i,t,r+1,n):o)?delete e[n]:e[n]=i})),e)}function A(e){return y(e,(function(e){return s(e)?Object.assign({},e):e}))}function b(e,t){var r=s(e)?Object.assign({},e):e;return JSON.stringify(r,(function(e,t){if(t&&"object"==typeof t&&t&&t.toJSON)try{return a.log("Calling toJSON on object"),t.toJSON()}catch(e){return t}return t}),t)}function g(e,t){if(!e||0===e.length)return[];if(t<1)throw new Error("You must provide a batch size greater than 0");return Array(Math.ceil(e.length/t)).fill(0).map((function(e,r){return r*t})).map((function(r){return e.slice(r,r+t)}))}},42:function(e,t,r){},44:function(e,t,r){},46:function(e,t,r){"use strict";var n,i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.includesLandingQueryParams=t.QueryParam=void 0,function(e){e.SENT_TO_EMAIL_ADDRESS="ref",e.REFERRED_BY_EMAIL="ref",e.SUBSCRIPTION_PRODUCT_ID="subproductid",e.MAILCHIMP_EMAIL_ID="mcuid",e.PURCHASE_AMOUNT="amount",e.PURCHASE_ITEM_ID="productId",e.EMAIL="e",e.REDIRECT_URL="signInSuccessUrl",e.MODE="mode",e.OOB_CODE="oobCode",e.API_KEY="apiKey",e.CONTINUE_URL="continueUrl",e.LANG="lang",e.CONTENT_INDEX="slide",e.MESSAGE="message",e.PROMPT_CONTENT_ENTRY_ID="pceid",e.UTM_SOURCE="utm_source",e.UTM_MEDIUM="utm_medium",e.NO_NAV="no_nav",e.SOCIAL_INVITE_ID="inviteId",e.UNSUBSCRIBE_SUCCESS="unsub_success",e.ALREADY_UNSUBSCRIBED="is_unsubbed",e.PREMIUM_DEFAULT="prem",e.SELECTED_PRODUCT="productId",e.SELECTED_TIER="tier",e.SELECTED_ELEMENT="element",e.SELECTED_PERIOD="period",e.SOURCE_APP="source-app",e.USE_PROMPT_ID="prompt",e.UPGRADE_SUCCESS="upgrade",e.CHART_TYPE="chart_type",e.CHART_DATA="chart_data",e.CACTUS_MEMBER_ID="memberId",e.CORE_VALUES="coreValues",e.FROM_AUTH="fromAuth",e.ABBREVIATED="short",e.AUTH_TOKEN="token",e.DOWNLOAD_TOKEN="download_token",e.EMBED="embed",e.CV_LAUNCH="cvlaunch",e.BG_INDEX="bg",e.TIER="tier",e.DISPLAY_NAME="displayName",e.CLEAR_CACHE="cc",e.CHECKOUT_SUCCESS_URL="checkoutSuccessUrl",e.CHECKOUT_CANCEL_URL="checkoutCancelUrl"}(n=t.QueryParam||(t.QueryParam={})),t.includesLandingQueryParams=function(e){var t,r,o=[n.UTM_SOURCE,n.UTM_MEDIUM,n.REFERRED_BY_EMAIL,n.SOCIAL_INVITE_ID];if(e)try{for(var a=i(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value;if(o.includes(u))return!0}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1}},47:function(e,t,r){"use strict";r.r(t),r.d(t,"SchemaName",(function(){return n}));var n,i=r(8),o=r(3),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=new(r.n(o).a)("FlamelinkModel");!function(e){e.promptContent="promptContent",e.subscriptionProducts="subscriptionProducts",e.subscriptionProductGroups="subscriptionProductGroups",e.appSettings="appSettings_web"}(n||(n={}));var u=function(){function e(e){e&&this.updateFromData(e)}return e.prototype.updateFromData=function(e){this._fl_meta_=e._fl_meta_,this.documentId=this._fl_meta_?this._fl_meta_.docId:e.id,this.parentId=e.parentId,this.order=e.order,this.entryId=this._fl_meta_?this._fl_meta_.fl_id:void 0,e["_fl_meta_.fl_id"]&&!this.entryId&&(this.entryId=e["_fl_meta_.fl_id"])},e.prototype.prepareForFirestore=function(){return a({},this)},e.prototype.toFlamelinkData=function(e){void 0===e&&(e=["schema","entryId","_fl_meta_"]);var t=this.prepareForFirestore();if(!t)throw new Error("Unable to prepare for firestore");var r=Object(i.convertDateToTimestamp)(t);return e&&r&&e.forEach((function(e){delete r[e]})),Object.keys(r).forEach((function(e){void 0===r[e]&&delete r[e]})),r},e.prototype.toJSON=function(e){void 0===e&&(e=["schema","_fl_meta_.schemaRef"]);try{var t=Object(i.convertDateToJSON)(a({},this)),r=Array.isArray(e)?e:["schema","_fl_meta_.schemaRef"];return r&&Array.isArray(r)&&t&&r.forEach((function(e){delete t[e]})),t.hasOwnProperty("_fl_meta_")&&delete t._fl_meta_.schemaRef,t}catch(e){return s.error(e),{message:"Error processing this model toJSON",error:e}}},e}();t.default=u},66:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.drawWordBubbleChart=t.DEFAULT_WORD_BUBBLE_CONFIG=void 0;var i=r(123),o=r(3),a=r(21),s=new o.default("wordBubbles");t.DEFAULT_WORD_BUBBLE_CONFIG=function(){return{maxDiameter:375,selectable:!1,selectedFillColor:"#33CCAB",numFillerBubbles:11,colorRange:["#47445E","#5E5A7C","#9490B0","#D3D1E3","#D3D1E3"]}};function u(e){return!e.children&&void 0!==e.word}t.drawWordBubbleChart=function(e,r,o){var c=Object.assign(t.DEFAULT_WORD_BUBBLE_CONFIG(),o),l=c.maxDiameter,d=c.colorRange,f=c.selectable,p=i.scaleOrdinal().range(d),m=i.pack().size([l,l]).padding(20),h=i.select(e);h.select("svg").remove().remove();var v=i.select(".bubble-chart").append("svg").attr("width","100%").attr("height","100%").attr("preserveAspectRatio","xMinYMid").attr("viewBox","0 0 375 375").style("display","block"),y=function(e,t,r){void 0===t&&(t=.1),void 0===r&&(r=.5);for(var n=[],i=0;i<e;i++){var o=a.getRandomNumberBetween(t,r,1),s=a.getRandomNumberBetween(t,r,1);n.push({word:"",frequency:o,salience:s})}return n}(c.numFillerBubbles),A=r.slice(0,7).concat(y).map((function(e){var t;return n(n({},e),{selected:!1,originalValue:null!==(t=e.frequency)&&void 0!==t?t:0})}));s.info("dataset",A),i.scaleSqrt().domain([0,100]).range([10,50]);var b=i.hierarchy({children:A}).sum((function(e){var t,r=0;return u(e)&&(r=null!==(t=Math.min(Math.max(e.frequency||1,e.salience||0),6))&&void 0!==t?t:0),r})).sort((function(e,t){var r,n;return(null!==(r=t.value)&&void 0!==r?r:0)-(null!==(n=e.value)&&void 0!==n?n:0)}));m(b);var g=v.selectAll(".bubble").data(b.children).enter();g.append("circle").attr("class","circle").attr("r",(function(e){return e.r})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).style("fill",(function(e){var t;return p(""+(null!==(t=e.value)&&void 0!==t?t:0))})).on("mouseover",(function(e){if(u(e.data)&&f&&!a.isBlank(e.data.word)){var t=i.select(this),r=e.r;t.style("cursor","pointer"),c.hoverFillColor&&t.style("fill",c.hoverFillColor),e.data.selected||t.transition().duration(300).attr("r",(function(){return 1.05*r}))}})).on("mouseout",(function(e){var t;if(u(e.data)&&f&&!a.isBlank(e.data.word)&&!e.data.selected){var r=e.r;i.select(this).style("fill",p(""+(null!==(t=e.value)&&void 0!==t?t:0))).transition().duration(300).attr("r",(function(){return r}))}})).on("click",(function(e){var t,r;if(f&&u(e.data)&&!a.isBlank(e.data.word)){var n=e.data,o=e.r;if(u(n)){var l=!n.selected;s.info("Data is selected = ",l),null===(t=c.wordClicked)||void 0===t||t.call(c,n,l);var d=i.select(this);s.info("selection",d),h.selectAll("circle").style("fill",(function(e){var t;return e.data.selected=!1,p(""+(null!==(t=e.value)&&void 0!==t?t:0))})).each((function(e){var t=e.r;i.select(this).transition().attr("r",t)})),n.selected=l;var m=l&&c.selectedFillColor?c.selectedFillColor:p(""+(null!==(r=e.value)&&void 0!==r?r:0));d.style("fill",m),d.transition().duration(200).attr("r",(function(){return 1.2*o}))}}})),g.append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+5})).attr("text-anchor","middle").attr("dominant-baseline","middle").text((function(e){return u(e.data)?e.data.word:" "})).style("font-size",(function(e){if(!u(e.data))return"0";var t=e.data.word.substring(0,e.r/3).length,r=e.r/3;return r*=9/t,r+=1,Math.round(r)+"px"})).style("pointer-events","none").style("fill","#FFF").style("cursor","pointer").append("title").text((function(e){return u(e.data)?e.data.word:" "}))}},7:function(e,t,r){"use strict";r.r(t),r.d(t,"SubscriptionTier",(function(){return o})),r.d(t,"DEFAULT_SUBSCRIPTION_TIER",(function(){return u}));var n,i,o,a=r(47),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e.subscriptionTier="subscriptionTier"}(i||(i={})),function(e){e.BASIC="BASIC",e.PLUS="PLUS",e.PREMIUM="PREMIUM"}(o||(o={}));var u=o.BASIC,c=function(e){function t(t){var r=e.call(this,t)||this;return r.schema=a.SchemaName.subscriptionProductGroups,r.sections=[],t&&Object.assign(r,t),r}return s(t,e),t.Fields=i,t}(a.default);t.default=c},8:function(e,t,r){"use strict";r.r(t),r.d(t,"isTimestamp",(function(){return c})),r.d(t,"toTimestamp",(function(){return l})),r.d(t,"timestampToDate",(function(){return d})),r.d(t,"setTimestamp",(function(){return f})),r.d(t,"convertDateToTimestamp",(function(){return p})),r.d(t,"convertDateToJSON",(function(){return m})),r.d(t,"convertTimestampToDate",(function(){return h})),r.d(t,"fromQueryDocumentSnapshot",(function(){return v})),r.d(t,"fromDocumentSnapshot",(function(){return y})),r.d(t,"fromQuerySnapshot",(function(){return A})),r.d(t,"fromFirestoreData",(function(){return b})),r.d(t,"fromJSON",(function(){return g})),r.d(t,"removeDuplicates",(function(){return E})),r.d(t,"flattenUnique",(function(){return S}));var n,i=r(4),o=r(3),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=new(r.n(o).a)("FirestoreUti.ts");function c(e){return Object(i.isNotNull)(e)&&(e instanceof n||e.seconds&&e.nanoseconds)}function l(e){return n.fromDate(e)}function d(e){if(c(e)){if(e.toDate)return e.toDate();if(e.hasOwnProperty("seconds")&&e.hasOwnProperty("nanoseconds"))return new Date(1e3*e.seconds+e.nanoseconds/1e6)}}function f(e){n=e}function p(e){var t=Object.assign({},e);return Object(i.transformObjectSync)(t,(function(e){return Object(i.isDate)(e)?n.fromDate(e):e}))}function m(e){var t=Object.assign({},e);return Object(i.transformObjectSync)(t,(function(e){return Object(i.isDate)(e)?e.getTime():e}))}function h(e){var t=Object.assign({},e);return Object(i.transformObjectSync)(t,(function(e){return c(e)?d(e):e}))}function v(e,t,r){if(e.exists){var n=e.data(r);if(n)return n.id=e.id,b(n,t)}}function y(e,t,r){if(e.exists){var n=e.data(r);if(n)return n.id=e.id,b(n,t)}}function A(e,t){var r=[];return e.empty?r:(e.forEach((function(e){var n=y(e,t);n?r.push(n):u.warn("Unable to decode model",t)})),r)}function b(e,t){var r=h(e),n=new t,i=Object.assign(n,r);return i.prepareFromFirestore(e),i}function g(e,t){var r=new t;return r.decodeJSON(e),r}function E(e){var t={};return e.reduce((function(e,t){var r=t.id;return r?(e[r]||(e[r]=t),e):e}),t),Object.values(t)}function S(e){var t;return E((t=[]).concat.apply(t,s(e)))}},81:function(e,t,r){"use strict";var n=r(42);r.n(n).a}},[[124,0,1]]]);