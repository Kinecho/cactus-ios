(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{118:function(e,t,r){"use strict";var n=r(52);r.n(n).a},12:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={appCustomScheme:"app.cactus",googleAnalyticsID:"UA-127159143-5",googleOptimizeID:"GTM-KFBRFFG",facebookPixelID:"1422468787913495",firebase:{apiKey:"AIzaSyDu_-z20lelwf58ZtPurwNagHL0UBdMb4U",authDomain:"cactus.app",databaseURL:"https://cactus-app-prod.firebaseio.com",projectId:"cactus-app-prod",storageBucket:"cactus-app-prod.appspot.com",messagingSenderId:"654981460803",appId:"1:654981460803:web:183ae7005e0dd805",measurementId:"G-S2ETMEEEVJ"},flamelinkFirebaseConfig:{apiKey:"AIzaSyDu_-z20lelwf58ZtPurwNagHL0UBdMb4U",authDomain:"cactus.app",databaseURL:"https://cactus-app-prod.firebaseio.com",projectId:"cactus-app-prod",storageBucket:"cactus-app-prod.appspot.com",messagingSenderId:"654981460803",appId:"1:654981460803:web:183ae7005e0dd805",measurementId:"G-S2ETMEEEVJ"},flamelinkEnvironmentId:"production",firstPromptId:"nIVmhvgppLNgNMAsWEb0",cloudSpongeKey:"PwpSNjcoLLh9EdPmpKxXVw",appStoreUrl:"https://apps.apple.com/us/app/cactus-mindfulness-journal/id1474513514?ls=1",playStoreUrl:"https://play.google.com/store/apps/details?id=app.cactus",apiDomain:"https://us-central1-cactus-app-prod.cloudfunctions.net",stripe:{apiKey:"pk_live_5jwkYz17Bg1IKuXQvfnbmyGg",monthlyPlanId:"plan_GDkJkQds5AkTz9",yearlyPlanId:"plan_GDkJ9jDqXdj3Pb"},domain:"https://cactus.app",firebaseDynamicLink:{domain:"cactus.app",prefix:"/p"},sentry:{dsn:"https://d41561516bba4e04b0d10a1526c83c27@sentry.io/1490133"},env:"prod",isDev:!1,isStage:!1,isProd:!0,version:"de2acbc2eee0404cb8e37e4a1fb3db07268412d9",androidUserAgent:"CactusAndroid",branchLiveKey:"key_live_heLJqNeQvEOgkUX3XUF92hadCFi7uWW0",revenueCatApiKey:"dlWuxUOEBonywlmBlOMQtTfUQGZXAKbJ"}},142:function(e,t,r){"use strict";r.r(t),r.d(t,"Transaction",(function(){return p})),r.d(t,"DocumentReference",(function(){return m}));var n=r(11),i=r(23),o=r(6),a=r(8),s=r(24),u=r(3),c=r.n(u),l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},d=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},p=n.firestore.Transaction,m=n.firestore.DocumentReference,h=n.firestore.Timestamp,v=n.firestore.FieldValue,A=new c.a("FirestoreService"),y={includeDeleted:!1,onlyDeleted:!1},b={includeDeleted:!1,onlyDeleted:!1},g=function(){function e(){this.firestore=Object(o.getFirestore)()}return e.prototype.getServerTimestamp=function(){return v.serverTimestamp()},e.prototype.getCurrentTimestamp=function(){return h.now()},e.prototype.getTimestampFromMilis=function(e){return h.fromMillis(e)},e.prototype.getTimestampFromDate=function(e){return h.fromDate(e)},e.prototype.getCollectionRef=function(e){return this.firestore.collection(e)},e.prototype.getCollectionRefFromModel=function(e){return this.firestore.collection(e.collection)},e.prototype.getDocumentRefFromModel=function(e){var t=this.getCollectionRefFromModel(e);return e.id?t.doc(e.id):t.doc()},e.prototype.initializeModel=function(e){var t=this.getCollectionRef(e.collection),r=t.doc();return e.id?r=t.doc(e.id):(e.id=r.id,e.createdAt=new Date),e.updatedAt=new Date,e},e.prototype.save=function(e){return l(this,void 0,Promise,(function(){var t,r,n,i;return d(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t=this.getCollectionRef(e.collection),r=t.doc(),e.id?r=t.doc(e.id):e.id=r.id,e.createdAt||(e.createdAt=new Date),e.updatedAt=new Date,[4,e.toFirestoreData()];case 1:return n=o.sent(),[4,r.set(n,{merge:!0})];case 2:return o.sent(),[2,e];case 3:return i=o.sent(),A.error("failed to save firestore document",i),"permission-denied"===i.code&&Object(s.c)({title:"Whoops!",message:"You do not have the proper permissions to perform this action.",error:i}),[2];case 4:return[2]}}))}))},e.prototype.getById=function(e,t,r){return void 0===r&&(r=y),l(this,void 0,Promise,(function(){var n,i;return d(this,(function(o){switch(o.label){case 0:return n=new t,[4,this.getCollectionRef(n.collection).doc(e).get()];case 1:return(i=o.sent())?r.includeDeleted||!0!==i.get("deleted")?[2,Object(a.fromDocumentSnapshot)(i,t)]:(A.warn("Document is deleted, and the request options did not include deleted objects"),[2]):[2]}}))}))},e.prototype.getFirst=function(e,t){return l(this,void 0,Promise,(function(){var r,n;return d(this,(function(i){switch(i.label){case 0:return[4,this.executeQuery(e,t)];case 1:return r=i.sent(),n=f(r.results,1),[2,n[0]]}}))}))},e.prototype.observeFirst=function(e,t,r){return this.observeQuery(e,t,{onData:function(e){var t=f(e,1)[0];r.onData(t)}})},e.prototype.observeById=function(e,t,r){var n=new t;return this.getCollectionRef(n.collection).doc(e).onSnapshot((function(e){if(!r.includeDeleted&&!0===e.get("deleted"))return A.warn("Document is deleted, and the request options did not include deleted objects",r.queryName),void r.onData(void 0);r.onData(Object(a.fromDocumentSnapshot)(e,t))}),(function(e){A.error('there was an error fetching the document snapshot "'+(r.queryName||"unknown")+'"',e),r.onData(void 0,e)}))},e.prototype.getPaginated=function(e,t,r){return l(this,void 0,Promise,(function(){var n=this;return d(this,(function(o){return[2,new Promise((function(o){return l(n,void 0,void 0,(function(){var n,a,s,u;return d(this,(function(c){switch(c.label){case 0:return n=t.limit,a=t.lastResult,t.onData,s=e,n&&(s=s.limit(n)),(null==a?void 0:a.firstSnapshot)&&(s=s.startAfter(a.firstSnapshot)),[4,(s=s.where(i.BaseModelField.deleted,"==",!1)).get()];case 1:return u=c.sent(),this.getPaginatedSnapshotHandler((function(e){o(e)}),r)(u),[2]}}))}))}))]}))}))},e.prototype.observePaginated=function(e,t,r){var n=t.limit,o=t.lastResult,a=t.onData,s=e;return s=s.where(i.BaseModelField.deleted,"==",!1),n&&(s=s.limit(n)),(null==o?void 0:o.lastSnapshot)&&(s=s.startAfter(o.lastSnapshot)),s.onSnapshot(this.getPaginatedSnapshotHandler(a,r,n))},e.prototype.getPaginatedSnapshotHandler=function(e,t,r){return function(n,i){var o={results:[],added:[],removed:[],updated:[],pageSize:r,mightHaveMore:!1,error:i};n.docs.forEach((function(e){var r,n=Object(a.fromDocumentSnapshot)(e,t);n?null===(r=o.results)||void 0===r||r.push(n):A.error("Failed to decode model for doc.id "+e.id+" and type "+t)})),n.docs.length>0&&(o.firstSnapshot=n.docs[0],o.lastSnapshot=n.docs[n.docs.length-1]),r&&n.docs.length===r&&(o.mightHaveMore=!0),n.docChanges().forEach((function(e){var r,n,i,s=Object(a.fromDocumentSnapshot)(e.doc,t);if(s)switch(e.type){case"added":null===(r=o.added)||void 0===r||r.push(s);case"modified":null===(n=o.updated)||void 0===n||n.push(s);case"removed":null===(i=o.removed)||void 0===i||i.push(s)}})),e(o)}},e.prototype.buildQuery=function(e,t){void 0===t&&(t=b);var r=e;return void 0===t.includeDeleted&&(t.includeDeleted=b.includeDeleted),void 0===t.onlyDeleted&&(t.onlyDeleted=b.onlyDeleted),t.includeDeleted?t.onlyDeleted&&(r=r.where("deleted","==",!0)):r=r.where("deleted","==",!1),t.pagination&&(r=r.limit(t.pagination.limit).orderBy(t.pagination.orderBy,t.pagination.sortDirection),t.pagination.startAfter?r=r.startAfter(t.pagination.startAfter):t.pagination.startAt?r=r.startAt(t.pagination.startAt):t.pagination.endAt?r=r.endAt(t.pagination.endAt):t.pagination.endBefore&&r.endBefore(t.pagination.endBefore)),r},e.prototype.executeQuery=function(e,t,r){return void 0===r&&(r=b),l(this,void 0,Promise,(function(){var n,i,o,u;return d(this,(function(c){switch(c.label){case 0:n=this.buildQuery(e,r),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.get()];case 2:return i=c.sent(),o=i.size,[2,{results:Object(a.fromQuerySnapshot)(i,t),size:o}];case 3:return u=c.sent(),A.error("Failed to execute query",u),u.message&&-1!==u.message.indexOf("The query requires an index")&&(Object(s.a)("index-needed",{title:"An index needs to be created",message:u.message}),Object(s.d)("index-needed")),[2,{results:[],size:0}];case 4:return[2]}}))}))},e.prototype.observeQuery=function(e,t,r){var n=this.buildQuery(e,r),i=[];return n.onSnapshot((function(e){e.empty&&r.onData(i),e.docChanges().forEach((function(e){if(e&&e.doc){var n=Object(a.fromQueryDocumentSnapshot)(e.doc,t);n&&("added"!==e.type&&("removed"===e.type&&(i.splice(e.oldIndex,1),r.onRemoved&&r.onRemoved(n)),"modified"===e.type&&(e.newIndex>=0&&i.splice(e.newIndex,1,n),r.onModified&&r.onModified(n))),"added"===e.type&&(i.splice(e.newIndex,0,n),r.onAdded&&r.onAdded(n)))}})),r.onData(i)}),(function(e){A.error("Error getting snapshot | queryName="+r.queryName,e.message),e.message.includes("The query requires an index")&&(Object(s.a)("index-needed",{title:"An index needs to be created",message:e.message}),Object(s.d)("index-needed"))}))},e.prototype.delete=function(e,t){return l(this,void 0,Promise,(function(){var r;return d(this,(function(n){switch(n.label){case 0:return[4,this.getById(e,t)];case 1:return!(r=n.sent())||r.deleted?[3,3]:(r.deleted=!0,r.deletedAt=new Date,[4,this.save(r)]);case 2:return n.sent(),[3,4];case 3:r&&r.deleted?A.warn("Model is already deleted. Not performing any action"):A.warn("No object found for given id. Not deleting anything."),n.label=4;case 4:return[2,r]}}))}))},e.sharedInstance=new e,e}();t.default=g},143:function(e,t,r){"use strict";r.r(t),r.d(t,"JournalStatus",(function(){return i})),r.d(t,"NotificationStatus",(function(){return o})),r.d(t,"NotificationChannel",(function(){return a})),r.d(t,"Field",(function(){return s})),r.d(t,"DEFAULT_PROMPT_SEND_TIME",(function(){return h}));var n,i,o,a,s,u=r(23),c=r(2),l=r(40),d=r(39),f=r(45),p=r(38),m=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e.PREMIUM="PREMIUM",e.NONE="NONE",e.TESTER="TESTER"}(i||(i={})),function(e){e.NOT_SET="NOT_SET",e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"}(o||(o={})),function(e){e.email="email",e.push="push"}(a||(a={})),function(e){e.firstName="firstName",e.lastName="lastName",e.email="email",e.userId="userId",e.signupAt="signupAt",e.lastSyncedAt="lastSyncedAt",e.mailchimpListMemberId="mailchimpListMember.id",e.mailchimpListMemberUniqueEmailId="mailchimpListMember.unique_email_id",e.mailchimpListMemberWebId="mailchimpListMember.web_id",e.journalStatus="journalStatus",e.fcmTokens="fcmTokens",e.signupConfirmedAt="signupConfirmedAt",e.lastJournalEntryAt="lastJournalEntryAt",e.unsubscribedAt="unsubscribedAt",e.stats="stats",e.stats_reflections="reflections",e.activityStatus="activityStatus",e.promptSendTime="promptSendTime",e.timeZone="timeZone",e.promptSendTimeUTC="promptSendTimeUTC",e.promptSendTimeUTC_hour="promptSendTimeUTC.hour",e.promptSendTimeUTC_minute="promptSendTimeUTC.minute",e.subscription="subscription",e.subscriptionTier="subscription.tier",e.subscriptionTrialEndsAt="subscription.trial.endsAt",e.subscriptionStripeId="subscription.stripeSubscriptionId",e.subscriptionCancellation="subscription.cancellation",e.subscriptionCancellationAccessEndsAt="subscription.cancellation.accessEndsAt",e.subscriptionCancellationInitiatedAt="subscription.cancellation.userInitiatedAt",e.subscriptionActivated="subscription.activated",e.subscriptionCanceledAccessEndsAt="subscription.cancellation.accessEndsAt",e.subscriptionOptOutTrialStartedAt="subscription.optOutTrial.startedAt",e.subscriptionOptOutTrialEndsAt="subscription.optOutTrial.endsAt",e.stripeCustomerId="stripe.customerId",e.coreValues="coreValues",e.focusElement="focusElement",e.lastReplyAt="lastReplyAt"}(s||(s={}));var h={hour:2,minute:45},v=function(e){function t(){var t,r=null!==e&&e.apply(this,arguments)||this;return r.collection=u.Collection.members,r.journalStatus=i.NONE,r.notificationSettings=((t={})[a.email]=o.ACTIVE,t[a.push]=o.NOT_SET,t),r.promptSendTimeUTC=r.getDefaultPromptSendTimeUTC(),r.signupQueryParams={},r.stats={},r.activityStatus={},r.stripe={},r}return m(t,e),t.prototype.toMemberData=function(){return this.toJSON()},t.prototype.decodeJSON=function(t){var r,n,i;e.prototype.decodeJSON.call(this,t);var o=null===(r=this.subscription)||void 0===r?void 0:r.optOutTrial;o&&(o.endsAt=this.decodeDate(o.endsAt),o.startedAt=this.decodeDate(o.startedAt));var a=null===(n=this.subscription)||void 0===n?void 0:n.trial;a&&(a.activatedAt=this.decodeDate(a.activatedAt),a.endsAt=this.decodeDate(a.endsAt));var s=null===(i=this.subscription)||void 0===i?void 0:i.cancellation;s&&(s.accessEndsAt=this.decodeDate(s.accessEndsAt),s.processedAt=this.decodeDate(s.processedAt),s.initiatedAt=this.decodeDate(s.initiatedAt)),this.activityStatus&&(this.activityStatus.lastSeenOccurredAt=this.decodeDate(this.activityStatus.lastSeenOccurredAt)),this.unsubscribedAt=this.decodeDate(this.unsubscribedAt),this.signupAt=this.decodeDate(this.signupAt),this.signupConfirmedAt=this.decodeDate(this.signupConfirmedAt),this.lastSyncedAt=this.decodeDate(this.lastSyncedAt),this.lastReplyAt=this.decodeDate(this.lastReplyAt),this.lastJournalEntryAt=this.decodeDate(this.lastJournalEntryAt),this.adminEmailUnsubscribedAt=this.decodeDate(this.adminEmailUnsubscribedAt)},t.fromMemberData=function(e){var r=new t;return r.decodeJSON(e),r},t.prototype.prepareForFirestore=function(){return e.prototype.prepareForFirestore.call(this),this.email=this.email?this.email.toLowerCase().trim():this.email,this.referredByEmail=this.getReferredBy(),this},t.prototype.getSignupSource=function(){if(this.signupQueryParams&&this.signupQueryParams.utm_source)return this.signupQueryParams.utm_source},t.prototype.getSignupMedium=function(){if(this.signupQueryParams&&this.signupQueryParams.utm_medium)return this.signupQueryParams.utm_medium},t.prototype.getReferredBy=function(){return this.referredByEmail?this.referredByEmail:this.mailchimpListMember&&this.mailchimpListMember.merge_fields.REF_EMAIL?this.mailchimpListMember.merge_fields.REF_EMAIL:void 0},t.prototype.getFullName=function(){return((this.firstName||"")+" "+(this.lastName||"")).trim()},t.prototype.getCurrentLocaleDateObject=function(e){return void 0===e&&(e=new Date),this.timeZone?l.c(e,this.timeZone):c.DateTime.local().toObject()},t.prototype.getDefaultPromptSendTimeUTC=function(){return{hour:c.DateTime.utc().minus({hours:1}).hour,minute:l.b()}},t.prototype.getLocalPromptSendTimeFromUTC=function(){var e=Object(d.a)(this.timeZone);if(this.promptSendTimeUTC&&e){var t=c.DateTime.utc().set(this.promptSendTimeUTC).setZone(e);return{hour:t.hour,minute:t.minute}}},Object.defineProperty(t.prototype,"tier",{get:function(){var e,t;return null!==(t=null===(e=this.subscription)||void 0===e?void 0:e.tier)&&void 0!==t?t:p.DEFAULT_SUBSCRIPTION_TIER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tierDisplayName",{get:function(){return Object(f.subscriptionTierDisplayName)(this.tier,this.isOptInTrialing)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"daysLeftInTrial",{get:function(){var e,t,r,n,i=(null===(t=null===(e=this.subscription)||void 0===e?void 0:e.optOutTrial)||void 0===t?void 0:t.endsAt)||(null===(n=null===(r=this.subscription)||void 0===r?void 0:r.trial)||void 0===n?void 0:n.endsAt);return i?Math.max(l.a(i),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOptInTrialing",{get:function(){return Object(f.isOptInTrialing)(this.subscription)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOptOutTrialing",{get:function(){return Object(f.isOptOutTrialing)(this.subscription)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needsTrialExpiration",{get:function(){return Object(f.needsTrialExpiration)(this.subscription)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasActiveSubscription",{get:function(){return!!this.subscription&&!this.isOptInTrialing&&this.tier!==p.SubscriptionTier.BASIC},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasUpcomingCancellation",{get:function(){var e,t;return!!(null===(t=null===(e=this.subscription)||void 0===e?void 0:e.cancellation)||void 0===t?void 0:t.accessEndsAt)&&this.subscription.cancellation.accessEndsAt>new Date},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stripeCustomerId",{get:function(){var e;return null===(e=this.stripe)||void 0===e?void 0:e.customerId},set:function(e){var t=this.stripe||{};t.customerId=e,this.stripe=t},enumerable:!1,configurable:!0}),t.prototype.getCoreValueAtIndex=function(e){void 0===e&&(e=0);var t=this.coreValues;if(t&&0!==t.length)return t[e%t.length]},t.Field=s,t}(u.BaseModel);t.default=v},161:function(e,t,r){"use strict";var n=r(54);r.n(n).a},162:function(e,t,r){"use strict";r.r(t);var n=r(14),i=r(3),o=r.n(i),a=r(15),s=r(41),u=r(21),c=r(18),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=new o.a("wordBubbles");function f(e){return!e.children&&void 0!==e.word}function p(e,t,r){var n=Object.assign({maxDiameter:375,selectable:!1,selectedFillColor:"#33CCAB",numFillerBubbles:11,colorRange:["#47445E","#5E5A7C","#9490B0","#D3D1E3","#D3D1E3"]},r),i=n.maxDiameter,o=n.colorRange,a=n.selectable,s=Object(u.c)().range(o),p=Object(u.b)().size([i,i]).padding(20),m=Object(u.e)(e);m.select("svg").remove().remove();var h=Object(u.e)(".bubble-chart").append("svg").attr("width","100%").attr("height","100%").attr("preserveAspectRatio","xMinYMid").attr("viewBox","0 0 375 375").style("display","block"),v=function(e,t,r){void 0===t&&(t=.1),void 0===r&&(r=.5);for(var n=[],i=0;i<e;i++){var o=Object(c.getRandomNumberBetween)(t,r,1),a=Object(c.getRandomNumberBetween)(t,r,1);n.push({word:"",frequency:o,salience:a})}return n}(n.numFillerBubbles),A=t.slice(0,7).concat(v).map((function(e){var t;return l(l({},e),{selected:!1,originalValue:null!==(t=e.frequency)&&void 0!==t?t:0})}));d.info("dataset",A);Object(u.d)().domain([0,100]).range([10,50]);var y=Object(u.a)({children:A}).sum((function(e){var t,r=0;return f(e)&&(r=null!==(t=Math.min(Math.max(e.frequency||1,e.salience||0),6))&&void 0!==t?t:0),r})).sort((function(e,t){var r,n;return(null!==(r=t.value)&&void 0!==r?r:0)-(null!==(n=e.value)&&void 0!==n?n:0)}));p(y);var b=h.selectAll(".bubble").data(y.children).enter();b.append("circle").attr("class","circle").attr("r",(function(e){return e.r})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).style("fill",(function(e){var t;return s(""+(null!==(t=e.value)&&void 0!==t?t:0))})).on("mouseover",(function(e){if(f(e.data)&&a&&!Object(c.isBlank)(e.data.word)){var t=Object(u.e)(this),r=e.r;t.style("cursor","pointer"),n.hoverFillColor&&t.style("fill",n.hoverFillColor),e.data.selected||t.transition().duration(300).attr("r",(function(){return 1.05*r}))}})).on("mouseout",(function(e){var t;if(f(e.data)&&a&&!Object(c.isBlank)(e.data.word)&&!e.data.selected){var r=e.r;Object(u.e)(this).style("fill",s(""+(null!==(t=e.value)&&void 0!==t?t:0))).transition().duration(300).attr("r",(function(){return r}))}})).on("click",(function(e){var t,r;if(a&&f(e.data)&&!Object(c.isBlank)(e.data.word)){var i=e.data,o=e.r;if(f(i)){var l=!i.selected;d.info("Data is selected = ",l),null===(t=n.wordClicked)||void 0===t||t.call(n,i,l);var p=Object(u.e)(this);d.info("selection",p),m.selectAll("circle").style("fill",(function(e){var t;return e.data.selected=!1,s(""+(null!==(t=e.value)&&void 0!==t?t:0))})).each((function(e){var t=e.r;Object(u.e)(this).transition().attr("r",t)})),i.selected=l;var h=l&&n.selectedFillColor?n.selectedFillColor:s(""+(null!==(r=e.value)&&void 0!==r?r:0));p.style("fill",h),p.transition().duration(200).attr("r",(function(){return 1.2*o}))}}})),b.append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y+5})).attr("text-anchor","middle").attr("dominant-baseline","middle").text((function(e){return f(e.data)?e.data.word:" "})).style("font-size",(function(e){if(!f(e.data))return"0";var t=e.data.word.substring(0,e.r/3).length,r=e.r/3;return r*=9/t,r+=1,Math.round(r)+"px"})).style("pointer-events","none").style("fill","#FFF").style("cursor","pointer").append("title").text((function(e){return f(e.data)?e.data.word:" "}))}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h,v=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),A=function(){return(A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},b=new o.a("InsightWordChart"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMounted=!1,t.selected=null,t}return v(t,e),t.prototype.mounted=function(){this.isMounted=!0,this.renderBubbles()},t.prototype.onWords=function(){this.renderBubbles()},t.prototype.renderBubbles=function(){var e=this;if(this.isMounted){this.$forceUpdate();p(".bubble-chart",this.words,A(A({selectable:this.selectable},this.chartConfig),{wordClicked:function(t,r){b.info("Clicked ",t),e.selected=r?t:null,e.$emit("selected",r?t:null)}}))}else b.info("Not mounted yet")},y([Object(s.b)("words")],t.prototype,"onWords",null),y([Object(s.a)({type:Array,default:[]})],t.prototype,"words",void 0),y([Object(s.a)({type:Boolean,default:!1})],t.prototype,"selectable",void 0),y([Object(s.a)({type:Boolean,default:!1})],t.prototype,"blurry",void 0),y([Object(s.a)({type:Object,required:!1,default:null})],t.prototype,"chartConfig",void 0),t=y([a.b],t)}(n.a),E=(r(118),r(55)),S=Object(E.a)(g,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"insight-word-chart"},[t("div",{class:["bubble-chart",{isBlurry:this.blurry}]})])}),[],!1,null,"51abbbc6",null).exports,T=r(24),I=r(56),_=(r(12),r(175),r(174),r(13),r(6),r(33),r(87),r(44),r(4),new o.a("Analytics.ts"),null),O=P();function P(){return _||(window.dataLayer=window.dataLayer||[],_=function(){window.dataLayer.push(arguments)}),_}var C=new o.a("WordBubbleEmbedPage"),N=Object(T.b)(I.QueryParam.CHART_DATA),D=N?JSON.parse(atob(N)):[];console.log("initial words",D);var w=new(function(){function e(){this._words=[],this.blurred=!0,this.loaded=!1}return Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},set:function(e){var t;this._delegate=e,null===(t=this.delegate)||void 0===t||t.onData(this.words)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"words",{get:function(){return this._words},set:function(e){var t;this._words=e||[],this.loaded=!0,null===(t=this.delegate)||void 0===t||t.onData(this._words)},enumerable:!1,configurable:!0}),e}());D&&D.length&&(w.words=D),window.fireShowMeAnalyticsEvent=function(){O("event","revealed_insight",{event_category:"prompt_content",event_label:"word_chart"})},window.unlockInsights=function(){w.blurred=!1,window.fireShowMeAnalyticsEvent()},window.lockInsights=function(){w.blurred=!0},window.setInsightWords=function(e){console.log("Setting words ",e),e&&Array.isArray(e)?w.words=e:console.warn("An array was not passed")},window.setInsightWordsBase64=function(e){if(e){var t=atob(e),r=JSON.parse(t);C.info("Decoded base64 string into words array",r),r&&Array.isArray(r)&&(w.words=r)}};var R=n.a.extend({name:"InsightsEmbedPage",components:{WordChart:S},data:function(){return{dataSource:w}},beforeMount:function(){document.body.classList.add("transparent"),w.delegate={onData:function(e){C.info("Fetched words from data source",e)}}},destroyed:function(){document.body.classList.remove("transparent")}}),M=(r(161),Object(E.a)(R,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container",style:{display:"flex",flex:1,justifyItems:"stretch",alignItems:"stretch"}},[t("transition",{attrs:{name:"fade-in"}},[this.dataSource.loaded?t("WordChart",{staticStyle:{flex:"1"},attrs:{words:this.dataSource.words,blurry:this.dataSource.blurred}}):this._e()],1)],1)}),[],!1,null,null,null).exports);new n.a({template:"\n        <WordBubbleEmbedPage/>\n    ",components:{WordBubbleEmbedPage:M}}).$mount("#app")},164:function(e,t,r){"use strict";r.r(t);var n,i,o,a,s,u=r(89),c=r.n(u),l=r(4),d=r(35),f=r(40),p=r(18),m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},h=function(e){return"/subscribers/"+e+"/attributes"},v=function(e){return"/subscribers/"+e};!function(e){e.TEST="TEST",e.INITIAL_PURCHASE="INITIAL_PURCHASE",e.NON_RENEWING_PURCHASE="NON_RENEWING_PURCHASE",e.RENEWAL="RENEWAL",e.PRODUCT_CHANGE="PRODUCT_CHANGE",e.CANCELLATION="CANCELLATION",e.BILLING_ISSUE="BILLING_ISSUE",e.SUBSCRIBER_ALIAS="SUBSCRIBER_ALIAS"}(n||(n={})),function(e){e.TRIAL="TRIAL",e.INTRO="INTRO",e.NORMAL="NORMAL",e.PROMOTIONAL="PROMOTIONAL"}(i||(i={})),function(e){e.PLAY_STORE="PLAY_STORE",e.APP_STORE="APP_STORE",e.STRIPE="STRIPE",e.MAC_APP_STORE="MAC_APP_STORE",e.PROMOTIONAL="PROMOTIONAL"}(o||(o={})),function(e){e.SANDBOX="SANDBOX",e.PRODUCTION="PRODUCTION"}(a||(a={})),function(e){e.UNSUBSCRIBE="UNSUBSCRIBE",e.BILLING_ERROR="BILLING_ERROR",e.DEVELOPER_INITIATED="DEVELOPER_INITIATED",e.PRICE_INCREASE="PRICE_INCREASE",e.CUSTOMER_SUPPORT="CUSTOMER_SUPPORT",e.UNKNOWN="UNKNOWN"}(s||(s={}));var A=r(12),y=r(44),b=r(3);function g(e){return e.isAxiosError}var E=function(){return(E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},S=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},T=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},I=new(r.n(b).a)("RevenueCatService"),_=function(){function e(){var e=A.a.revenueCatApiKey;this.client=c.a.create({baseURL:"https://api.revenuecat.com/v1",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})}return e.prototype.updateLastSeen=function(e){return S(this,void 0,void 0,(function(){var t,r,n,i;return T(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(t=null==e?void 0:e.id)?(r=Object(y.getAppType)(),n=function(e){var t;switch(e){case d.a.WEB:t="web";break;case d.a.ANDROID:t="android";break;case d.a.IOS:t="ios"}if(t)return{"X-Platform":t}}(r),[4,this.client.get(v(t),{headers:E({},n)})]):[2];case 1:return o.sent(),[4,this.updateAttributes(e)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),I.error("Unexpected error when updating RevenueCat member activity",i),[3,4];case 4:return[2]}}))}))},e.prototype.updateAttributes=function(e){var t,r;return S(this,void 0,Promise,(function(){var n,i,o,a,s;return T(this,(function(u){switch(u.label){case 0:if(!(n=null==e?void 0:e.id))return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),i=h(n),o=function(e){var t=null==e?void 0:e.id;if(e&&t){var r={memberId:t,email:e.email,name:e.getFullName()};return e.stats.reflections&&(r.reflectionCount=e.stats.reflections.totalCount,r.streakDays=e.stats.reflections.currentStreakDays,r.streakWeeks=e.stats.reflections.currentStreakWeeks,r.streakMonths=e.stats.reflections.currentStreakMonths,r.reflectionMinutes=Object(f.d)(e.stats.reflections.totalDurationMs)),e.getReferredBy()&&(r.referredBy=e.getReferredBy()),r}}(e),(a=function(e){if(e){e.memberId;var t=e.email,r=e.name,n=m(e,["memberId","email","name"]),i={};return t&&(i.$email={value:t}),r&&(i.$displayName={value:r}),Object.keys(n).forEach((function(e){var t=n[e];if(Object(l.c)(i))t=null;else if(t=""+t,Object(p.isBlank)(t))return;i[e]={value:t}})),i}}(o))?[4,this.client.post(i,{attributes:a})]:[2];case 2:return u.sent(),[3,4];case 3:return g(s=u.sent())?I.error("Failed to update RevenueCat user attributes",null!==(r=null===(t=s.response)||void 0===t?void 0:t.data)&&void 0!==r?r:s):I.error("Failed to update RevenueCat user attributes",s),[3,4];case 4:return[2]}}))}))},e.shared=new e,e}();t.default=_},166:function(e,t,r){"use strict";r.r(t);var n,i=function(){},o=r(19),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t,r,n=null!==e&&e.apply(this,arguments)||this;return n.settings={dates:{longFormat:"LLLL d, yyyy",shortFormat:"L/d/yyyy"}},n.pronouns={YOU:"you"},n.checkout={UPGRADE:"Upgrade",TRY_CACTUS_PLUS:"Try Cactus Plus",CURRENT_PLAN:"Current Plan",MANAGE_MY_PLAN:"Manage My Plan",PURCHASE:"Purchase",SIGN_IN_TO_CONTINUE_CHECKOUT:"Please log in to continue the upgrade process.",SIGN_IN_TO_CONTINUE_RESTORING_PURCHASES:"Please sign in to restoring your purchases",BILLING_PERIOD:(t={},t[o.BillingPeriod.weekly]="Weekly",t[o.BillingPeriod.monthly]="Monthly",t[o.BillingPeriod.yearly]="Annual",t[o.BillingPeriod.once]="One Time",t[o.BillingPeriod.never]="Free",t),BILLING_PERIOD_PER:(r={},r[o.BillingPeriod.weekly]="Week",r[o.BillingPeriod.monthly]="Month",r[o.BillingPeriod.yearly]="Year",r[o.BillingPeriod.once]="Once",r[o.BillingPeriod.never]="Never",r),TIER_BASIC:"Basic",TIER_PLUS:"Plus",TIER_PREMIUM:"Premium"},n.account={PREFERRED_NOTIFICATION_TIME:"What time would you like to be notified?",SELECTED_TIMEZONE_DIFFERS_FROM_DEVICE:"Your device's time zone doesn't match your selected time zone.",UPDATE_TIMEZONE_TO:"Would you like to update your time zone to",CANCEL_UPDATE_TIMEZONE:"No, don't update",CONFIRM_UPDATE_TIMEZONE:"Yes, update timezone",EMAIL_NOTIFICATION_CHECKBOX_LABEL:"Receive an email when a new prompt is ready",PERMANENTLY_DELETE_ACCOUNT:"Permanently Delete Account...",DELETE_ACCOUNT:"Delete Cactus Account"},n.common={LOG_IN:"Log In",NEXT:"Next",SIGN_UP:"Sign Up",TRY_IT_FREE:"Try It Free",SUBMIT:"Submit",SIGNING_IN:"Signing In",PRICING:"Pricing",LOG_OUT:"Log Out",ENTER_YOUR_EMAIL_ADDRESS:"Enter your email address",WELCOME:"Welcome",WELCOME_BACK:"Welcome back",ACCOUNT:"Account",EMAIL:"Email",EMAIL_ADDRESS:"Email Address",SUBSCRIPTION:"Subscription",TIER:"Tier",FIRST_NAME:"First Name",LAST_NAME:"Last Name",NOTIFICATIONS:"Notifications",REMOVE:"Remove",TIME_ZONE:"Time Zone",LOADING:"Loading",HOUR:"Hour",MINUTE:"Minute",DAYS_LEFT:"days left",DAY_LEFT:"day left",DAYS_LEFT_IN_TRIAL:"days left in trial",DAY_LEFT_IN_TRIAL:"day left in trial",TRIAL_ENDS_TODAY:"Trial ends today",ENDS_TODAY:"Ends today",LEARN_MORE:"Learn More",TRIAL:"Trial",IOS:"iOS",ANDROID:"Android",VERIFY_IN_GMAIL:"Confirm in Gmail",VERIFY_GMAIL_URL:"https://mail.google.com/mail/u/0/#search/from%3A%40cactus.app+in%3Aanywhere"},n.navigation={ACCOUNT:"Account",CORE_VALUES:"Core Values",SOCIAL:"Friends",MY_JOURNAL:"My Journal",JOURNAL:"Journal",ACTIVITY:"Activity",INSIGHTS:"Insights",HOME:"Home"},n.prompts={TODAY:"Today",EDIT_NOTE:"Edit Note",REFLECT:"Reflect",SHARE_PROMPT:"Share Prompt",ADD_A_NOTE:"Add a Note",DONE:"Done",CLOSE:"Close",TAP_ANYWHERE:"Tap Anywhere",SAVED:"Saved",SAVING:"Saving",CELEBRATIONS:["Well done!","Nice work!","Way to go!"],REFLECTIONS:"Reflections",SECONDS:"Seconds",SECOND:"Second",MINUTES:"Minutes",DAY_STREAK:"Day Streak",WEEK_STREAK:"Week Streak",MONTH_STREAK:"Month Streak",GO_HOME:"Go Home",SIGN_UP_MESSAGE:"Sign Up to Keep it Going",SHARE_YOUR_NOTE:"Share Your Note",SHARE_NOTE:"Share Note",SHARE_PROMPT_COPY_MD:"Become more courageous and **build trust and connection** with others."},n.elements={MEANING:"Meaning",MEANING_DESCRIPTION:"Living with a sense of purpose while you enjoy the present",EXPERIENCE:"Experience",EXPERIENCE_DESCRIPTION:"Exploring your intellectual curiosities and openly observing life’s lessons",ENERGY:"Energy",ENERGY_DESCRIPTION:"Caring for your physical health and managing the mind-body connection",EMOTIONS:"Emotions",EMOTIONS_DESCRIPTION:"Embracing the spectrum of emotions as you strive for optimism",RELATIONSHIPS:"Relationships",RELATIONSHIPS_DESCRIPTION:"Developing rewarding and fulfilling relationships with yourself and others"},n.error={PLEASE_ENTER_A_VALID_EMAIL_ADDRESS:"Please enter a valid email address",PLEASE_ENTER_AN_EMAIL_ADDRESS:"Please enter an email address",SORRY_WE_ARE_HAVING_ISSUES:"Sorry, it looks like we're having issues.",SORRY_WE_ARE_HAVING_ISSUES_TRY_AGAIN:"Sorry, it looks like we're having issues. Please try again later."},n.auth={CONNECTED_ACCOUNTS:"Connected Accounts",DISPLAY_NAME:"Display Name",MEMBER_SINCE:"Member Since",SIGN_UP_FREE:"Sign Up Free",magicLinkSuccess:function(e){return"To confirm your email address and securely sign in, tap the button in the email sent to "+e+"."}},n}return a(t,e),t.prototype.exclamation=function(e){return e?e+"!":""},t}(i);t.default=s},18:function(e,t,r){"use strict";r.r(t),r.d(t,"microDollarsStringToCents",(function(){return c})),r.d(t,"removeSpecialCharacters",(function(){return l})),r.d(t,"getFilenameFromInput",(function(){return d})),r.d(t,"preventOrphanedWords",(function(){return f})),r.d(t,"stripQueryParams",(function(){return p})),r.d(t,"isFeatureAuthUrl",(function(){return m})),r.d(t,"appendQueryParams",(function(){return h})),r.d(t,"appendDomain",(function(){return v})),r.d(t,"getUrlFromInput",(function(){return A})),r.d(t,"isValidEmail",(function(){return y})),r.d(t,"isGmail",(function(){return b})),r.d(t,"isExternalUrl",(function(){return g})),r.d(t,"destructureDisplayName",(function(){return E})),r.d(t,"getInitials",(function(){return S})),r.d(t,"toCamelCamse",(function(){return T})),r.d(t,"getResponseText",(function(){return I})),r.d(t,"getWordCount",(function(){return _})),r.d(t,"getCharacterCount",(function(){return O})),r.d(t,"getIntegerFromStringBetween",(function(){return P})),r.d(t,"getPromptQuestion",(function(){return C})),r.d(t,"isBlank",(function(){return N})),r.d(t,"getProviderDisplayName",(function(){return D})),r.d(t,"titleCase",(function(){return w})),r.d(t,"StringTransforms",(function(){return R})),r.d(t,"formatPriceCentsUsd",(function(){return M})),r.d(t,"getRandomNumberBetween",(function(){return L})),r.d(t,"formatPercentage",(function(){return U})),r.d(t,"decodeHTMLEntities",(function(){return k}));var n=r(60),i=r(84),o=r.n(i),a=r(4),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};function c(e){if(Object(a.e)(e)){var t=Number(e);if(Object(a.d)(t))return t/1e4}}function l(e,t){return e.trim().toLowerCase().replace(/[^a-z0-9-_\s\\\/]/g,"").replace(/[-_\\\/]/g," ").replace(/(\s+)/g,t)}function d(e,t){void 0===t&&(t=void 0);var r=l(e,"_");return t?r+"."+t:r}function f(e,t){if(void 0===t&&(t=" "),!e||"string"!=typeof e)return e;var r=e.lastIndexOf(" "),n=e.lastIndexOf(t);return n>-1&&n>r?e:r>0?e.substr(0,r)+t+e.substr(r+1):e}function p(e){var t=n.parseUrl(e);return{url:t.url,query:t.query}}function m(e){return!(!e||!/\/feature-auth/.test(e))}function h(e,t){if(!t||0===Object.keys(t).length)return e;var r=n.parseUrl(e),i=s(s({},t),r.query);return r.url+"?"+n.stringify(i)}function v(e,t){void 0===t&&(t=void 0);var r=e;if(!r)return"";if(r.includes("://"))return r;r&&0===r.indexOf("/")&&(r=r.slice(1));var n=r;return n.startsWith("/")||(n="/"+n),t&&t.includes("://")?""+t+n:!t||n.startsWith("http")||t.includes("localhost")?t&&!n.startsWith("http")?"http://"+t+n:n:"https://"+t+n}function A(e,t){void 0===t&&(t=void 0);var r=e;if(!r)return"";r&&0===r.indexOf("/")&&(r=r.slice(1));var n=l(r,"-");return n.startsWith("/")||(n="/"+n),!t||n.startsWith("http")||t.includes("localhost")?t&&!n.startsWith("http")?"http://"+t+n:n:"https://"+t+n}function y(e){return/^\w+([\.+-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}function b(e){return/^[a-z0-9](\.?[a-z0-9]){5,}@g(oogle)?mail\.com$/.test(e)}function g(e){return!(!e||N(e))&&new RegExp("^(?:(?:https?|ftp):\\/\\/|\\b(?:[a-z\\d]+\\.))(?:(?:[^\\s()<>]+|\\((?:[^\\s()<>]+|(?:\\([^\\s()<>]+\\)))?\\))+(?:\\((?:[^\\s()<>]+|(?:\\(?:[^\\s()<>]+\\)))?\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))?").test(e)}function E(e){if(!e)return{};var t=e.trim().replace(/\s\s+/g," ").split(" ");if(t.length<3){var r=u(t,2);return{firstName:r[0],lastName:r[1]}}if(3===t.length){var n=u(t,3);return{firstName:n[0],middleName:n[1],lastName:n[2]}}return t.length>3?{firstName:u(t,1)[0],lastName:t[t.length-1]}:{}}function S(e){if(!e)return"";var t=E(e),r=t.firstName,n=t.lastName,i="";return r&&(i+=r.charAt(0)),n&&(i+=n.charAt(0)),i}function T(e){return o()(e)}function I(e){if(e&&0!==e.length)return e.map((function(e){return(e.content.text||"").trim()})).join("\n\n").trim()}function _(e){return e&&e.trim()?e.trim().split(/\s+/g).length:0}function O(e){return e?e.trim().length:0}function P(e,t){for(var r=0,n=0;n<e.length;n++)r=Math.abs(e.charCodeAt(n)+((r<<5)-r));return r%t}function C(e){var t=e.prompt,r=e.promptContent,n=e.response,i=(null==r?void 0:r.getQuestion())||(null==t?void 0:t.question)||(null==n?void 0:n.promptQuestion)||void 0;if(i&&!N(i))return i.trim()}function N(e){return!e||!e.trim()}function D(e){switch(e){case"password":return"Email";case"twitter.com":return"Twitter";case"facebook.com":return"Facebook";case"google.com":return"Google";case"apple.com":return"Apple";default:return e||""}}function w(e){return e&&e.length>0?e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" "):""}var R={stringOrUndefined:function(e){return N(e)?void 0:e},numberOrUndefined:function(e){return Object(a.d)(e)?void 0:Number(e)},booleanOrUndefined:function(e){if(!N(e))return e.toLowerCase().startsWith("t")},dateOrUndefined:function(e){if(!N(e))try{return new Date(e)}catch(e){return}}};function M(e){return("$"+(e/100).toFixed(2)).replace(".00","")}function L(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=!0);var i=Math.pow(10,Math.max(r,0)),o=t*i,a=e*i,s=n?1:0;return(Math.floor(Math.random()*(o-a+s))+a)/i}function U(e,t){if(void 0===t&&(t=0),Object(a.c)(e))return null;var r=Number(e);return Object(a.d)(r)?(100*r).toFixed(t)+"%":null}var B=[["amp","&"],["apos","'"],["#x27","'"],["#x2F","/"],["#39","'"],["#47","/"],["lt","<"],["gt",">"],["nbsp"," "],["quot",'"']];function k(e){if(e){for(var t=e,r=0,n=B.length;r<n;++r)t=t.replace(new RegExp("&"+B[r][0]+";","g"),B[r][1]);return t}}},19:function(e,t,r){"use strict";r.r(t),r.d(t,"BillingPeriod",(function(){return i}));var n,i,o,a=r(58),s=r(38),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e.weekly="weekly",e.monthly="monthly",e.yearly="yearly",e.once="once",e.never="never"}(i||(i={})),function(e){e.availableForSale="availableForSale",e.stripePlanId="stripePlanId",e.appleProductId="appleProductId",e.androidProductId="androidProductId",e.billingPeriod="billingPeriod"}(o||(o={}));var c=function(e){function t(t){var r=e.call(this,t)||this;return r.schema=a.SchemaName.subscriptionProducts,r.displayName="",r.priceCentsUsd=0,r.billingPeriod=i.monthly,r.availableForSale=!1,r.subscriptionTier=s.SubscriptionTier.PLUS,t&&Object.assign(r,t),r}return u(t,e),Object.defineProperty(t.prototype,"isFree",{get:function(){return 0===this.priceCentsUsd||this.billingPeriod===i.never},enumerable:!1,configurable:!0}),t.Fields=o,t}(a.default);t.default=c},23:function(e,t,r){"use strict";r.r(t),r.d(t,"Collection",(function(){return n})),r.d(t,"BaseModelField",(function(){return i})),r.d(t,"BaseModel",(function(){return l}));var n,i,o=r(8),a=r(3),s=r.n(a),u=r(4),c=new s.a("FirestoreBaseModels");!function(e){e.emailReply="emailReply",e.testModels="testModels",e.sentCampaigns="sentCampaigns",e.reflectionResponses="reflectionResponses",e.users="users",e.members="members",e.reflectionPrompt="reflectionPrompt",e.sentPrompts="sentPrompts",e.pendingUsers="pendingUsers",e.socialInvites="socialInvites",e.socialConnections="socialConnections",e.memberProfiles="memberProfiles",e.socialConnectionRequests="socialConnectionRequests",e.flamelink_content="fl_content",e.checkoutSessions="checkoutSessions",e.payments="payments",e.emailLogs="emailLogs",e.dataExports="dataExports",e.coreValuesAssessmentResponses="coreValuesAssessmentResponses",e.deletedUsers="deletedUsers",e.gapAnalysisAssessmentResults="gapAnalysisAssessmentResults",e.notifications="notifications"}(n||(n={})),function(e){e.id="id",e.createdAt="createdAt",e.updatedAt="updatedAt",e.deleted="deleted",e.deletedAt="deletedAt"}(i||(i={}));var l=function(){function e(){this.deleted=!1}return e.prototype.prepareForFirestore=function(){return this},e.prototype.prepareFromFirestore=function(e){return this},e.prototype.toFirestoreData=function(e){void 0===e&&(e=["id","collection"]);var t=this.prepareForFirestore();if(!t)throw new Error("Unable to prepare for firestore");var r=Object(o.convertDateToTimestamp)(t);return e&&r&&e.forEach((function(e){delete r[e]})),r=Object(u.f)(r),Object.keys(r).forEach((function(e){void 0===r[e]&&delete r[e]})),r},e.prototype.toJSON=function(e){void 0===e&&(e=["collection"]);try{var t=Object.assign({},this),r=Object(o.convertDateToJSON)(t),n=Array.isArray(e)?e:["collection"];return n&&Array.isArray(n)&&r&&n.forEach((function(e){delete r[e]})),r}catch(e){return c.error("Error processing this model toJSON",e),{message:"Error processing this model toJSON",error:e}}},e.prototype.decodeJSON=function(e){Object.assign(this,e),this.createdAt=this.decodeDate(e.createdAt),this.updatedAt=this.decodeDate(e.updatedAt),this.deletedAt=this.decodeDate(e.deletedAt)},e.prototype.decodeDate=function(e){if(e)try{var t=new Date(e);if(isNaN(t.getTime()))return;return t}catch(e){return}},e}()},24:function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p}));r(18);var n=r(25),i=r(3),o=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},s=new(r.n(i).a)("util.ts");function u(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function c(e){var t=document.getElementById(e);return!!t&&(t.classList.remove("open"),!0)}function l(e){var t=document.getElementById(e);return!!t&&(t.classList.add("open"),!0)}function d(e){var t="error-"+(new Date).getTime();f(t,{title:e.title,message:e.message||"Something unexpected occurred."}),l(t)}function f(e,t){var r,n=document.getElementById(e);n&&(s.warn("a modal with id "+e+" already exists, removing it"),n.remove());var i=u('<button title="Close" class="modal-close tertiary icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="18" height="18"><path fill="#33ccab" d="M8.414 7l5.293 5.293a1 1 0 0 1-1.414 1.414L7 8.414l-5.293 5.293a1 1 0 1 1-1.414-1.414L5.586 7 .293 1.707A1 1 0 1 1 1.707.293L7 5.586 12.293.293a1 1 0 0 1 1.414 1.414L8.414 7z"/></svg>\n    </button>');i.addEventListener("click",(function(){c(e),t.onClose&&t.onClose()}));var o=document.createElement("div");if(o.classList.add("modal-content"),o.append(i),t.imageUrl){var l=u('<img src="'+t.imageUrl+'" alt="'+(t.imageAlt||"")+'" />');o.append(l)}var d=null,f=null,p=null;t.title&&((d=document.createElement("h2")).innerText=t.title,o.append(d)),t.message&&((f=document.createElement("div")).innerText=t.message,o.append(f)),t.buttonCta&&t.buttonUrl&&((p=document.createElement("a")).innerText=t.buttonCta,p.href=t.buttonUrl,p.className="button",p.target="_blank",o.append(p));var m=document.createElement("div");return m.id=e,m.classList.add("modal-window"),t.classNames&&(r=m.classList).add.apply(r,a(t.classNames)),m.appendChild(o),document.body.appendChild(m)}function p(e){try{return n.parse(window.location.search,{ignoreQueryPrefix:!0})[e]}catch(e){return s.error("browser does not support url params",e),null}}},3:function(e,t,r){"use strict";(function(e){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t){"string"==typeof t?(this.fileName=t,this.serverName=e.env.FUNCTION_NAME||e.env.K_SERVICE||void 0):(this.fileName=t.fileName,this.serverName=t.serverName)}return Object.defineProperty(t.prototype,"prefix",{get:function(){return this.getDateString()+" ["+(this.serverName?this.serverName+".":"")+this.fileName+"]"},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.debug.apply(console,r)},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.info.apply(this,n(e))},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.log.apply(console,r)},t.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.warn.apply(console,r)},t.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[].slice.call(arguments,0);r.unshift(this.prefix),console.error.apply(console,r)},t.prototype.getDateString=function(){return(new Date).toISOString()},t}();t.default=i}).call(this,r(27))},33:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageKey=void 0;var n=r(8),i=r(3);!function(e){e.emailForSignIn="emailForSignIn",e.emailAutoFill="emailAutoFill",e.newUserSignIn="newUserSignIn",e.referredByEmail="referredByEmail",e.anonReflectionResponse="anonReflectionResponse",e.landingQueryParams="landingQueryParams",e.flamelinkEnvironmentOverride="flamelinkEnvironmentOverride",e.memberStatsEnabled="memberStatsEnabled",e.contactsImportEnabled="contactsImportEnabled",e.activityBadgeCount="activityBadgeCount",e.androidFCMToken="androidFCMToken",e.subscriptionPriceCents="subscriptionPriceCents"}(t.LocalStorageKey||(t.LocalStorageKey={}));var o=new i.default("StorageService.ts"),a=function(){function e(){}return e.clear=function(){try{localStorage.clear()}catch(e){o.error("StorageService Failed to clear storage",e)}},e.removeItem=function(e,t){if(t){var r=this.getEncodedMap(e);delete r[t],o.log("removed "+t+" from ",r),this.saveJSON(e,r)}else localStorage.removeItem(e)},e.buildKey=function(e,t){return e+"_"+t},e.getItem=function(e){try{return localStorage.getItem(e)||void 0}catch(t){return void o.error("Failed to get item "+e+" from local storage")}},e.saveBoolean=function(e,t){localStorage.setItem(e,""+t)},e.getBoolean=function(e,t){void 0===t&&(t=!1);var r=this.getItem(e);return null==r||""===r.trim()?t:"true"===r||!1},e.saveNumber=function(e,t){localStorage.setItem(e,""+t)},e.saveString=function(e,t){localStorage.setItem(e,t)},e.getString=function(e){return localStorage.getItem(e)||void 0},e.getNumber=function(e,t){var r=this.getItem(e);if(null==r||""===r.trim())return t;try{var n=Number(r);if(!isNaN(n))return n}catch(e){o.error("An error occurred while parsing to number for value: ",r)}return t},e.saveJSON=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.getJSON=function(e){return this.getEncodedMap(e)},e.saveModel=function(e,t,r){try{var n=this.getEncodedModelString(t);if(r){var i=this.getEncodedMap(e);i[r]=n,this.saveJSON(e,i)}else localStorage.setItem(e,n)}catch(e){o.error("Failed to save to localstorage",e)}},e.getEncodedModelString=function(e){return this.toBase64(e.toJSON())},e.getEncodedMap=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}},e.getModel=function(e,t,r){try{if(r){var n=this.getEncodedMap(e)[r];return this.getModelFromEncodedString(n,t)}var i=localStorage.getItem(e);return this.getModelFromEncodedString(i,t)}catch(e){o.error("Failed to fetch model from localstorage",e)}},e.getDecodeModelMap=function(e,t){var r=this,n=this.getEncodedMap(e),i={};return Object.keys(n).forEach((function(a){var s=n[a];try{var u=r.getModelFromEncodedString(s,t);u&&(i[a]=u)}catch(t){o.error("StorageService: "+e+": Decoding error for modelId "+a+" ")}})),i},e.getModelFromEncodedString=function(e,t){if(e){var r=JSON.parse(this.fromBase64(e));return n.fromJSON(r,t)}},e.toBase64=function(e){return btoa(JSON.stringify(e))},e.fromBase64=function(e){return atob(e)},e}();t.default=a},35:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n,i,o,a,s,u=r(23),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e.PROMPT="PROMPT",e.JOURNAL="JOURNAL",e.EMAIL="EMAIL"}(i||(i={})),function(e){e.WEB="WEB",e.ANDROID="ANDROID",e.IOS="IOS"}(o||(o={})),function(e){e.EMAIL="EMAIL",e.PROMPT_WEB="PROMPT_WEB",e.PROMPT_IOS="PROMPT_IOS",e.PROMPT_ANDROID="PROMPT_ANDROID",e.JOURNAL_WEB="JOURNAL_WEB",e.JOURNAL_IOS="JOURNAL_IOS",e.JOURNAL_ANDROID="JOURNAL_ANDROID"}(a||(a={})),function(e){e.userId="userId",e.cactusMemberId="cactusMemberId",e.emailReplyId="emailReplyId",e.responseMedium="responseMedium",e.mailchimpMemberId="mailchimpMemberId",e.mailchimpUniqueEmailId="mailchimpUniqueEmailId",e.memberEmail="memberEmail",e.memberFirstName="memberFirstName",e.memberLastName="memberLastName",e.content="content",e.promptId="promptId",e.promptQuestion="promptQuestion",e.reflectionDurationMs="reflectionDurationMs",e.shared="shared",e.cactusElement="cactusElement",e.insights="insights",e.updatedAt="updatedAt",e.toneAnalysis="toneAnalysis",e.sentiment="sentiment",e.mightNeedInsightsUpdate="mightNeedInsightsUpdate",e.insightsUpdatedAt="insightsUpdatedAt"}(s||(s={}));!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collection=u.Collection.reflectionResponses,t.anonymous=!1,t.content={},t.reflectionDurationMs=0,t.shared=!1,t.reflectionDates=[],t.mightNeedInsightsUpdate=!1,t}c(t,e),t.prototype.addReflectionLog=function(e,t){void 0===t&&(t=10);var r=e.getTime();return!this.reflectionDates.find((function(e){return Math.abs(e.getTime()-r)<1e3*t*60}))&&(this.reflectionDates.push(e),!0)},t.prototype.decodeJSON=function(t){e.prototype.decodeJSON.call(this,t),this.sharedAt=t.sharedAt?new Date(t.sharedAt):void 0,this.unsharedAt=t.unsharedAt?new Date(t.unsharedAt):void 0;var r=t.reflectionDates||[];this.reflectionDates=r.map((function(e){return new Date(e)}))},t.prototype.getMemberFullName=function(){return((this.memberFirstName||"")+" "+(this.memberLastName||"")).trim()},t.Field=s}(u.BaseModel)},38:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SUBSCRIPTION_TIER=t.SubscriptionTier=void 0;var o,a,s=r(58);!function(e){e.subscriptionTier="subscriptionTier"}(o||(o={})),function(e){e.BASIC="BASIC",e.PLUS="PLUS",e.PREMIUM="PREMIUM"}(a=t.SubscriptionTier||(t.SubscriptionTier={})),t.DEFAULT_SUBSCRIPTION_TIER=a.BASIC;var u=function(e){function t(t){var r=e.call(this,t)||this;return r.schema=s.SchemaName.subscriptionProductGroups,r.sections=[],t&&Object.assign(r,t),r}return i(t,e),t.Fields=o,t}(s.default);t.default=u},39:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(2),i=r(3),o=(new(r.n(i).a)("timezones.ts"),["Etc/GMT+12","Pacific/Midway","Pacific/Honolulu","America/Juneau","America/Dawson","America/Denver","America/Chihuahua","America/Phoenix","America/Chicago","America/Regina","America/Mexico_City","America/Belize","America/Detroit","America/Indiana/Indianapolis","America/Bogota","America/Noronha","America/Glace_Bay","America/Caracas","America/Santiago","America/St_Johns","America/Sao_Paulo","America/Argentina/Buenos_Aires","America/Godthab","Etc/GMT+2","Atlantic/Azores","Atlantic/Cape_Verde","GMT","Africa/Casablanca","Atlantic/Canary","Europe/London","Pacific/Easter","Etc/GMT","Etc/UTC","Pacific/Chatham","America/Adak","Europe/Belgrade","Europe/Sarajevo","Europe/Brussels","Europe/Amsterdam","Africa/Algiers","Europe/Bucharest","Africa/Cairo","Europe/Helsinki","Europe/Athens","Asia/Jerusalem","Africa/Harare","Europe/Moscow","Asia/Kuwait","Africa/Nairobi","Asia/Baghdad","Asia/Tehran","Asia/Dubai","Asia/Baku","Asia/Kabul","Asia/Yekaterinburg","Asia/Karachi","Asia/Kolkata","Asia/Kathmandu","Asia/Dhaka","Asia/Colombo","Asia/Almaty","Asia/Rangoon","Asia/Bangkok","Asia/Krasnoyarsk","Asia/Shanghai","Asia/Kuala_Lumpur","Asia/Taipei","Australia/Perth","Asia/Irkutsk","Asia/Seoul","Asia/Tokyo","Asia/Yakutsk","Australia/Darwin","Australia/Adelaide","Australia/Sydney","Australia/Brisbane","Australia/Hobart","Asia/Vladivostok","Australia/Lord_Howe","Pacific/Guam","Asia/Magadan","Pacific/Fiji","Pacific/Auckland","Pacific/Tongatapu"]),a={"Australia/ACT":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse",CET:"Europe/Paris","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",CST6CDT:"America/Chicago",Cuba:"America/Havana",EET:"Europe/Sofia",Egypt:"Africa/Cairo",Eire:"Europe/Dublin",EST:"America/Cancun",EST5EDT:"America/New_York",GB:"Europe/London",GMT0:"Etc/GMT",Greenwich:"Etc/GMT",Hongkong:"Asia/Hong_Kong",HST:"Pacific/Honolulu",Iceland:"Atlantic/Reykjavik",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli",MET:"Europe/Paris","GMT-0":"Etc/GMT","GB-Eire":"Europe/London","GMT+0":"Etc/GMT","Etc/Greenwich":"Etc/GMT","Etc/Universal":"Etc/UTC","Etc/Zulu":"Etc/UTC","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",MST:"America/Phoenix",MST7MDT:"America/Denver",Navajo:"America/Denver",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",PRC:"Asia/Shanghai",PST8PDT:"America/Los_Angeles",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul",UCT:"Etc/UTC",Universal:"Etc/UTC","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/Eastern":"America/New_York","US/East-Indiana":"America/Indiana/Indianapolis","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Pacific-New":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago",WET:"Europe/Lisbon","W-SU":"Europe/Moscow",Zulu:"Etc/UTC"},s={"Etc/GMT+12":"International Date Line West","Pacific/Midway":"Midway Island, Samoa","Pacific/Honolulu":"Hawaii","America/Juneau":"Alaska","America/Dawson":"Pacific Time (US and Canada); Tijuana","America/Denver":"Mountain Time (US and Canada)","America/Chihuahua":"Chihuahua, La Paz, Mazatlan","America/Phoenix":"Arizona","America/Chicago":"Central Time (US and Canada)","America/Regina":"Saskatchewan","America/Mexico_City":"Guadalajara, Mexico City, Monterrey","America/Belize":"Central America","America/Detroit":"Eastern Time (US and Canada)","America/Indiana/Indianapolis":"Indiana (East)","America/Bogota":"Bogota, Lima, Quito","America/Glace_Bay":"Atlantic Time (Canada)","America/Caracas":"Caracas, La Paz","America/Santiago":"Santiago","America/St_Johns":"Newfoundland and Labrador","America/Sao_Paulo":"Brasilia","America/Argentina/Buenos_Aires":"Buenos Aires, Georgetown","America/Godthab":"Greenland","America/Noronha":"Pernambuco, Brazil","Etc/GMT+2":"Mid-Atlantic","Atlantic/Azores":"Azores","Atlantic/Cape_Verde":"Cape Verde Islands",GMT:"Dublin, Edinburgh, Lisbon, London","Africa/Casablanca":"Casablanca, Monrovia","Atlantic/Canary":"Canary Islands","Europe/Belgrade":"Belgrade, Bratislava, Budapest, Ljubljana, Prague","Europe/Sarajevo":"Sarajevo, Skopje, Warsaw, Zagreb","Europe/Brussels":"Brussels, Copenhagen, Madrid, Paris","Europe/Amsterdam":"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","Africa/Algiers":"West Central Africa","Europe/Bucharest":"Bucharest","Africa/Cairo":"Cairo","Europe/Helsinki":"Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius","Europe/Athens":"Athens, Istanbul, Minsk","Asia/Jerusalem":"Jerusalem","Africa/Harare":"Harare, Pretoria","Europe/Moscow":"Moscow, St. Petersburg, Volgograd","Asia/Kuwait":"Kuwait, Riyadh","Africa/Nairobi":"Nairobi","Asia/Baghdad":"Baghdad","Asia/Tehran":"Tehran","Asia/Dubai":"Abu Dhabi, Muscat","Asia/Baku":"Baku, Tbilisi, Yerevan","Asia/Kabul":"Kabul","Asia/Yekaterinburg":"Ekaterinburg","Asia/Karachi":"Islamabad, Karachi, Tashkent","Asia/Kolkata":"Chennai, Kolkata, Mumbai, New Delhi","Asia/Kathmandu":"Kathmandu","Asia/Dhaka":"Astana, Dhaka","Asia/Colombo":"Sri Jayawardenepura","Asia/Almaty":"Almaty, Novosibirsk","Asia/Rangoon":"Yangon Rangoon","Asia/Bangkok":"Bangkok, Hanoi, Jakarta","Asia/Krasnoyarsk":"Krasnoyarsk","Asia/Shanghai":"Beijing, Chongqing, Hong Kong SAR, Urumqi","Asia/Kuala_Lumpur":"Kuala Lumpur, Singapore","Asia/Taipei":"Taipei","Australia/Perth":"Perth","Asia/Irkutsk":"Irkutsk, Ulaanbaatar","Asia/Seoul":"Seoul","Asia/Tokyo":"Osaka, Sapporo, Tokyo","Asia/Yakutsk":"Yakutsk","Australia/Darwin":"Darwin","Australia/Adelaide":"Adelaide","Australia/Sydney":"Canberra, Melbourne, Sydney","Australia/Brisbane":"Brisbane","Australia/Hobart":"Hobart","Asia/Vladivostok":"Vladivostok","Pacific/Guam":"Guam, Port Moresby","Asia/Magadan":"Magadan, Solomon Islands, New Caledonia","Pacific/Fiji":"Fiji Islands, Kamchatka, Marshall Islands","Pacific/Auckland":"Auckland, Wellington","Pacific/Tongatapu":"Nuku'alofa"};o.filter((function(e){return n.DateTime.local().setZone(e).isValid})).map((function(e){var t=n.DateTime.local().setZone(e),r=t.offset,i="GMT"+t.toFormat("ZZ");return{displayName:s[e],offsetMinutes:r,zoneName:e,offsetDisplay:i}})).sort((function(e,t){return t.offsetMinutes-e.offsetMinutes})).reduce((function(e,t){return e[t.zoneName]=t,e}),{});function u(e){if(e){var t=a[e];return t||e}}function c(e){if(e){var t=u(e);if(t)return n.DateTime.local().setZone(t).isValid?t:void 0}}},4:function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"g",(function(){return f})),r.d(t,"f",(function(){return p}));var n=r(3),i=new(r.n(n).a)("ObjectUtil.ts");function o(e){return!s(e)&&("object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0)}function a(e){return!s(e)&&Array.isArray(e)}function s(e){return null==e}function u(e){return!s(e)}function c(e){return u(e)&&e instanceof Date}function l(e){try{return u(e)&&"string"==typeof e}catch(e){return!1}}function d(e){try{return u(Number(e))&&"number"==typeof e&&!isNaN(e)}catch(e){return!1}}function f(e,t,r,n){if(void 0===r&&(r=0),r>=100)return i.warn("transformObjectSync method reached a depth greater than 10, Current depth = "+r+". Key = "+(n||"rootKey")+" Returning witihout processing"),e;if(a(e))return e.map((function(e){return f(e,t,r+1,n||"root-Array")}));var s=t(e);return s!==e?s:(o(e)&&Object.keys(e).forEach((function(n){var i=e[n];if("_fl_meta_"===n)return i;var a=t(i);void 0===(i=i===a&&(o(i)||Array.isArray(i))?f(i,t,r+1,n):a)?delete e[n]:e[n]=i})),e)}function p(e){return f(e,(function(e){return o(e)?Object.assign({},e):e}))}},40:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(2),i=(r(88),r(8),r(3)),o=r.n(i);r(39),r(4),r(18),new o.a("DateUtil.ts");function a(e,t){return n.DateTime.fromJSDate(e).setZone(t).toObject()}function s(e,t){void 0===t&&(t=1);var r=e/1e3/60;return t&&(r=Math.round(r)),r.toFixed(t)}function u(e){var t=n.DateTime.fromJSDate(e).set({hour:0}),r=n.Interval.fromDateTimes(n.DateTime.local(),t).count("days")-1;return Number.isNaN(r)?0:r}function c(e){return void 0===e&&(e=new Date),l(e.getMinutes())}function l(e){var t=e%60;return t<15?0:t<30?15:t<45?30:45}},44:function(e,t,r){"use strict";r.r(t),r.d(t,"MOBILE_BREAKPOINT_PX",(function(){return u})),r.d(t,"getDeviceDimensions",(function(){return l})),r.d(t,"isPreRender",(function(){return d})),r.d(t,"getDeviceTimeZone",(function(){return f})),r.d(t,"getDeviceLocale",(function(){return p})),r.d(t,"getUserAgent",(function(){return m})),r.d(t,"isAndroidDevice",(function(){return h})),r.d(t,"isIosDevice",(function(){return v})),r.d(t,"isAndroidApp",(function(){return A})),r.d(t,"getAppType",(function(){return y}));var n=r(3),i=r.n(n),o=r(12),a=r(35),s=r(39),u=600,c=new i.a("DeviceUtil");function l(){return{height:window.innerHeight,width:window.innerWidth}}function d(){return(m()||"").toLowerCase().includes("prerender")}function f(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone,t=Object(s.a)(e);return c.info("Device Timezone = '"+e+"'. Converted to valid timezone = '"+t+"'"),t}catch(e){return void c.error("Unable to fetch timezone from device. The 'Intl' API may not be supported")}}function p(){try{var e=Intl.DateTimeFormat().resolvedOptions().locale;return c.info("device locale",e),e}catch(e){c.error("Unable to fetch timezone from device. The 'Intl' API may not be supported")}}function m(){return navigator.userAgent}function h(){return new RegExp("android","i").test(m())}function v(){return/iPad|iPhone|iPod/.test(m())&&!window.MSStream}function A(){return navigator.userAgent===o.a.androidUserAgent}function y(){return A()?a.a.ANDROID:a.a.WEB}},45:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.needsTrialExpiration=t.isOptOutTrialing=t.isOptInTrialing=t.getDefaultTrial=t.getDefaultSubscriptionWithEndDate=t.getDefaultSubscriptionWithOptInTrial=t.getDefaultSubscription=t.DEFAULT_TRIAL_DAYS=t.getSubscriptionBillingPlatform=t.BillingPlatform=t.CancellationReasonCode=t.subscriptionTierDisplayName=t.isPremiumTier=t.PremiumSubscriptionTiers=t.BillingPeriodSortOrder=t.SubscriptionTierSortValue=void 0;var i,o=r(2),a=r(38),s=r(57),u=r(19),c=r(18);function l(e){void 0===e&&(e=t.DEFAULT_TRIAL_DAYS);var r=new Date;return{startedAt:r,endsAt:o.DateTime.fromJSDate(r).plus({days:e}).toJSDate(),activatedAt:void 0}}t.SubscriptionTierSortValue=((n={})[a.SubscriptionTier.BASIC]=0,n[a.SubscriptionTier.PLUS]=1,n[a.SubscriptionTier.PREMIUM]=2,n),t.BillingPeriodSortOrder=[u.BillingPeriod.never,u.BillingPeriod.once,u.BillingPeriod.weekly,u.BillingPeriod.monthly,u.BillingPeriod.yearly],t.PremiumSubscriptionTiers=[a.SubscriptionTier.PLUS,a.SubscriptionTier.PREMIUM],t.isPremiumTier=function(e){return!!e&&t.PremiumSubscriptionTiers.includes(e)},t.subscriptionTierDisplayName=function(e,t){void 0===t&&(t=!1);var r=s.default.getSharedInstance().copy;if(t)return r.common.TRIAL;if(e)switch(e){case a.SubscriptionTier.BASIC:return r.checkout.TIER_BASIC;case a.SubscriptionTier.PLUS:return r.checkout.TIER_PLUS;case a.SubscriptionTier.PREMIUM:return r.checkout.TIER_PREMIUM}},function(e){e.USER_CANCELED="USER_CANCELED",e.EXPIRED="EXPIRED",e.SYSTEM_CANCELED="SYSTEM_CANCELED",e.UNKNOWN="UNKNOWN",e.UNAVAILABLE="UNAVAILABLE",e.USER_DELETED="USER_DELETED"}(t.CancellationReasonCode||(t.CancellationReasonCode={})),function(e){e.STRIPE="STRIPE",e.APPLE="APPLE",e.GOOGLE="GOOGLE"}(i=t.BillingPlatform||(t.BillingPlatform={})),t.getSubscriptionBillingPlatform=function(e){if(e)return c.isBlank(e.appleOriginalTransactionId)?c.isBlank(e.googleOriginalOrderId)?c.isBlank(e.stripeSubscriptionId)?void 0:i.STRIPE:i.GOOGLE:i.APPLE},t.DEFAULT_TRIAL_DAYS=7,t.getDefaultSubscription=function(){return{tier:a.DEFAULT_SUBSCRIPTION_TIER,activated:!1}},t.getDefaultSubscriptionWithOptInTrial=function(e){return void 0===e&&(e=t.DEFAULT_TRIAL_DAYS),{tier:a.SubscriptionTier.PLUS,activated:!1,trial:l(e)}},t.getDefaultSubscriptionWithEndDate=function(e){var t=l();return t.endsAt=e,{legacyConversion:!1,tier:a.SubscriptionTier.PLUS,activated:!1,trial:t}},t.getDefaultTrial=l,t.isOptInTrialing=function(e){var r,n,i;return!!e&&(!(null===(r=null==e?void 0:e.trial)||void 0===r||!r.endsAt)&&(!(!t.PremiumSubscriptionTiers.includes(e.tier)||e.tier===a.SubscriptionTier.BASIC)&&(!(null===(n=e.trial)||void 0===n?void 0:n.activatedAt)&&(null===(i=e.trial)||void 0===i?void 0:i.endsAt)>new Date)))},t.isOptOutTrialing=function(e){var r,n;return!!e&&(!(null===(r=null==e?void 0:e.optOutTrial)||void 0===r||!r.endsAt)&&(!(!t.PremiumSubscriptionTiers.includes(e.tier)||e.tier===a.SubscriptionTier.BASIC)&&(null===(n=e.optOutTrial)||void 0===n?void 0:n.endsAt)>new Date))},t.needsTrialExpiration=function(e){var r,n,i,o=null==e?void 0:e.tier;return!!((null===(r=null==e?void 0:e.trial)||void 0===r?void 0:r.endsAt)&&o&&t.PremiumSubscriptionTiers.includes(o))&&(!(null===(n=null==e?void 0:e.trial)||void 0===n?void 0:n.activatedAt)&&(null===(i=null==e?void 0:e.trial)||void 0===i?void 0:i.endsAt.getTime())<Date.now())}},52:function(e,t,r){},54:function(e,t,r){},56:function(e,t,r){"use strict";var n,i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.includesLandingQueryParams=t.QueryParam=void 0,function(e){e.SENT_TO_EMAIL_ADDRESS="ref",e.REFERRED_BY_EMAIL="ref",e.SUBSCRIPTION_PRODUCT_ID="subproductid",e.MAILCHIMP_EMAIL_ID="mcuid",e.PURCHASE_AMOUNT="amount",e.PURCHASE_ITEM_ID="productId",e.EMAIL="e",e.REDIRECT_URL="signInSuccessUrl",e.MODE="mode",e.OOB_CODE="oobCode",e.API_KEY="apiKey",e.CONTINUE_URL="continueUrl",e.LANG="lang",e.CONTENT_INDEX="slide",e.MESSAGE="message",e.PROMPT_CONTENT_ENTRY_ID="pceid",e.UTM_SOURCE="utm_source",e.UTM_MEDIUM="utm_medium",e.NO_NAV="no_nav",e.SOCIAL_INVITE_ID="inviteId",e.UNSUBSCRIBE_SUCCESS="unsub_success",e.ALREADY_UNSUBSCRIBED="is_unsubbed",e.PREMIUM_DEFAULT="prem",e.SELECTED_PRODUCT="productId",e.SELECTED_TIER="tier",e.SELECTED_ELEMENT="element",e.SELECTED_PERIOD="period",e.SOURCE_APP="source-app",e.USE_PROMPT_ID="prompt",e.UPGRADE_SUCCESS="upgrade",e.CHART_TYPE="chart_type",e.CHART_DATA="chart_data",e.CACTUS_MEMBER_ID="memberId",e.CORE_VALUES="coreValues",e.FROM_AUTH="fromAuth",e.ABBREVIATED="short",e.AUTH_TOKEN="token",e.DOWNLOAD_TOKEN="download_token",e.EMBED="embed",e.CV_LAUNCH="cvlaunch",e.BG_INDEX="bg",e.TIER="tier",e.DISPLAY_NAME="displayName",e.CLEAR_CACHE="cc",e.CHECKOUT_SUCCESS_URL="checkoutSuccessUrl",e.CHECKOUT_CANCEL_URL="checkoutCancelUrl"}(n=t.QueryParam||(t.QueryParam={})),t.includesLandingQueryParams=function(e){var t,r,o=[n.UTM_SOURCE,n.UTM_MEDIUM,n.REFERRED_BY_EMAIL,n.SOCIAL_INVITE_ID];if(e)try{for(var a=i(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value;if(o.includes(u))return!0}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1}},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleCode=void 0;var n,i=r(166),o=new(r(3).default)("CopyService");!function(e){e.en_US="en-US",e.es="es"}(n=t.LocaleCode||(t.LocaleCode={}));var a=function(){function e(e){switch(void 0===e&&(e={}),this.locale=e.locale||n.en_US,this.locale){case n.en_US:this.copy=new i.default;break;default:o.error("Unsupported locale "+this.locale+", using "+n.en_US+" as default"),this.copy=new i.default}}return e.getSharedInstance=function(){if(!e.sharedInstance)throw new Error("No shared CopyService instance is available. Ensure you have called the initialize() function before using the shared instance");return e.sharedInstance},e.initialize=function(t){void 0===t&&(t={}),e.sharedInstance=new e(t)},e.prototype.getTrialDaysLeftShort=function(e,t){return void 0===t&&(t=!1),0===e&&t?this.copy.common.ENDS_TODAY:(0!==e||t)&&1===e?e+" "+this.copy.common.DAY_LEFT:e+" "+this.copy.common.DAYS_LEFT},e.prototype.getTrialDaysLeftLong=function(e,t){return void 0===t&&(t=!1),1===e?t?this.copy.common.TRIAL_ENDS_TODAY:e+" "+this.copy.common.DAY_LEFT_IN_TRIAL:e+" "+this.copy.common.DAYS_LEFT_IN_TRIAL},e.sharedInstance=new e,e}();t.default=a},58:function(e,t,r){"use strict";r.r(t),r.d(t,"SchemaName",(function(){return n}));var n,i=r(8),o=r(3),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=new(r.n(o).a)("FlamelinkModel");!function(e){e.promptContent="promptContent",e.subscriptionProducts="subscriptionProducts",e.subscriptionProductGroups="subscriptionProductGroups",e.appSettings="appSettings_web"}(n||(n={}));var u=function(){function e(e){e&&this.updateFromData(e)}return e.prototype.updateFromData=function(e){this._fl_meta_=e._fl_meta_,this.documentId=this._fl_meta_?this._fl_meta_.docId:e.id,this.parentId=e.parentId,this.order=e.order,this.entryId=this._fl_meta_?this._fl_meta_.fl_id:void 0,e["_fl_meta_.fl_id"]&&!this.entryId&&(this.entryId=e["_fl_meta_.fl_id"])},e.prototype.prepareForFirestore=function(){return a({},this)},e.prototype.toFlamelinkData=function(e){void 0===e&&(e=["schema","entryId","_fl_meta_"]);var t=this.prepareForFirestore();if(!t)throw new Error("Unable to prepare for firestore");var r=Object(i.convertDateToTimestamp)(t);return e&&r&&e.forEach((function(e){delete r[e]})),Object.keys(r).forEach((function(e){void 0===r[e]&&delete r[e]})),r},e.prototype.toJSON=function(e){void 0===e&&(e=["schema","_fl_meta_.schemaRef"]);try{var t=Object(i.convertDateToJSON)(a({},this)),r=Array.isArray(e)?e:["schema","_fl_meta_.schemaRef"];return r&&Array.isArray(r)&&t&&r.forEach((function(e){delete t[e]})),t.hasOwnProperty("_fl_meta_")&&delete t._fl_meta_.schemaRef,t}catch(e){return s.error(e),{message:"Error processing this model toJSON",error:e}}},e}();t.default=u},6:function(e,t,r){"use strict";r.r(t),r.d(t,"GoogleProvider",(function(){return v})),r.d(t,"FacebookProvider",(function(){return A})),r.d(t,"TwitterProvider",(function(){return y})),r.d(t,"EmailProvider",(function(){return b})),r.d(t,"PhoneProvider",(function(){return g})),r.d(t,"OAuthProvider",(function(){return E})),r.d(t,"FirebaseAppName",(function(){return o})),r.d(t,"EmailActionMode",(function(){return a})),r.d(t,"initializeFirebase",(function(){return S})),r.d(t,"getFlamelink",(function(){return T})),r.d(t,"getAuth",(function(){return I})),r.d(t,"getFirestore",(function(){return _})),r.d(t,"getFirebase",(function(){return O})),r.d(t,"firebaseAnalytics",(function(){return P}));var n,i,o,a,s=r(11),u=r(12),c=r(8),l=(r(124),r(127),r(131),r(165),r(163),r(86)),d=(r(133),r(138),r(33)),f=r.n(d),p=r(57),m=r.n(p),h=!1,v=s.auth.GoogleAuthProvider,A=s.auth.FacebookAuthProvider,y=s.auth.TwitterAuthProvider,b=s.auth.EmailAuthProvider,g=s.auth.PhoneAuthProvider,E=s.auth.OAuthProvider;function S(){if(!h){Object(c.setTimestamp)(s.firestore.Timestamp),n=s.initializeApp(u.a.firebase);var e=f.a.getItem(d.LocalStorageKey.flamelinkEnvironmentOverride),t=p.LocaleCode.en_US,r=s.initializeApp(u.a.flamelinkFirebaseConfig,o.flamelink);i=Object(l.a)({firebaseApp:r,dbType:"cf",env:e||u.a.flamelinkEnvironmentId,locale:t,precache:!0}),n.analytics(),m.a.initialize({locale:t}),s.firestore().settings({ignoreUndefinedProperties:!0}),h=!0}return s}function T(){return S(),i}function I(){return O().auth()}function _(){return O().firestore()}function O(){return S(),n}function P(){return O().analytics()}!function(e){e.flamelink="flamelink"}(o||(o={})),function(e){e.resetPassword="resetPassword",e.recoverEmail="recoverEmail",e.verifyEmail="verifyEmail",e.signIn="signIn"}(a||(a={}))},8:function(e,t,r){"use strict";r.r(t),r.d(t,"isTimestamp",(function(){return c})),r.d(t,"toTimestamp",(function(){return l})),r.d(t,"timestampToDate",(function(){return d})),r.d(t,"setTimestamp",(function(){return f})),r.d(t,"convertDateToTimestamp",(function(){return p})),r.d(t,"convertDateToJSON",(function(){return m})),r.d(t,"convertTimestampToDate",(function(){return h})),r.d(t,"fromQueryDocumentSnapshot",(function(){return v})),r.d(t,"fromDocumentSnapshot",(function(){return A})),r.d(t,"fromQuerySnapshot",(function(){return y})),r.d(t,"fromFirestoreData",(function(){return b})),r.d(t,"fromJSON",(function(){return g})),r.d(t,"removeDuplicates",(function(){return E})),r.d(t,"flattenUnique",(function(){return S}));var n,i=r(4),o=r(3),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=new(r.n(o).a)("FirestoreUti.ts");function c(e){return Object(i.b)(e)&&(e instanceof n||e.seconds&&e.nanoseconds)}function l(e){return n.fromDate(e)}function d(e){if(c(e)){if(e.toDate)return e.toDate();if(e.hasOwnProperty("seconds")&&e.hasOwnProperty("nanoseconds"))return new Date(1e3*e.seconds+e.nanoseconds/1e6)}}function f(e){n=e}function p(e){var t=Object.assign({},e);return Object(i.g)(t,(function(e){return Object(i.a)(e)?n.fromDate(e):e}))}function m(e){var t=Object.assign({},e);return Object(i.g)(t,(function(e){return Object(i.a)(e)?e.getTime():e}))}function h(e){var t=Object.assign({},e);return Object(i.g)(t,(function(e){return c(e)?d(e):e}))}function v(e,t,r){if(e.exists){var n=e.data(r);if(n)return n.id=e.id,b(n,t)}}function A(e,t,r){if(e.exists){var n=e.data(r);if(n)return n.id=e.id,b(n,t)}}function y(e,t){var r=[];return e.empty?r:(e.forEach((function(e){var n=A(e,t);n?r.push(n):u.warn("Unable to decode model",t)})),r)}function b(e,t){var r=h(e),n=new t,i=Object.assign(n,r);return i.prepareFromFirestore(e),i}function g(e,t){var r=new t;return r.decodeJSON(e),r}function E(e){var t={};return e.reduce((function(e,t){var r=t.id;return r?(e[r]||(e[r]=t),e):e}),t),Object.values(t)}function S(e){var t;return E((t=[]).concat.apply(t,s(e)))}},87:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(142),s=r(143),u=r(23),c=r(6),l=r(44),d=r(3),f=r(33),p=r(164),m=new d.default("CactusMemberService"),h=function(){function e(){var e=this;this.firestoreService=a.default.sharedInstance,this.memberHasLoaded=!1,this.authUnsubscriber=c.getAuth().onAuthStateChanged((function(t){return i(e,void 0,void 0,(function(){var e=this;return o(this,(function(r){return this.currentMemberUnsubscriber&&this.currentMemberUnsubscriber(),this.currentUser=t,t?this.currentMemberUnsubscriber=this.observeByUserId(t.uid,{onData:function(t){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.currentMember=t,this.memberHasLoaded=!0,t?[4,Promise.all([this.updateMemberSettingsIfNeeded(t),p.default.shared.updateLastSeen(t)])]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}}):this.currentMember=void 0,[2]}))}))}))}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return!!this.currentMember},enumerable:!1,configurable:!0}),e.prototype.updateMemberSettingsIfNeeded=function(e){var t,r,a;return i(this,void 0,Promise,(function(){var i,s,u,c,d,p;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e?(i=l.getDeviceTimeZone(),s=l.getDeviceLocale(),u=!1,i&&!e.timeZone&&(e.timeZone=i,u=!0),s&&!e.locale&&(e.locale=s,u=!0),c=f.default.getString(f.LocalStorageKey.androidFCMToken),d=null!==(t=e.fcmTokens)&&void 0!==t?t:[],c&&!d.includes(c)&&(console.log("Adding FCM token to member"),d.push(c),e.fcmTokens=d,f.default.removeItem(f.LocalStorageKey.androidFCMToken),u=!0),u?(m.log("[update settings if needed] member trial started at type of = ",n(null===(a=null===(r=e.subscription)||void 0===r?void 0:r.trial)||void 0===a?void 0:a.startedAt)),m.log("Updating member settings for member",e),[4,this.save(e)]):[3,2]):[2];case 1:o.sent(),o.label=2;case 2:return[3,4];case 3:return p=o.sent(),m.error("Failed to update member settings, an unexpected error occurred",p),[2];case 4:return[2]}}))}))},e.prototype.registerFCMToken=function(e){var t;return i(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return(r=this.currentMember)?l.isAndroidApp()?(n=null!==(t=r.fcmTokens)&&void 0!==t?t:[]).includes(e)?[3,2]:(n.push(e),r.fcmTokens=n,[4,this.save(r)]):(m.warn("User agent not allowed: "+l.getUserAgent()),[2]):(m.info("No cactus member found, not registering token"),[2]);case 1:i.sent(),f.default.removeItem(f.LocalStorageKey.androidFCMToken),m.info("Saved token to member"),i.label=2;case 2:return[2]}}))}))},e.prototype.getCurrentMember=function(){return i(this,void 0,Promise,(function(){var e=this;return o(this,(function(t){return this.currentMember?[2,this.currentMember]:[2,new Promise((function(t){var r=c.getAuth().onAuthStateChanged((function(n){return i(e,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return r(),this.currentUser=n,n?[4,this.getByUserId(n.uid)]:[3,2];case 1:return e=i.sent(),this.currentMember=e,this.memberHasLoaded=!0,t(e),[3,3];case 2:t(void 0),i.label=3;case 3:return[2]}}))}))}))}))]}))}))},e.prototype.getCollectionRef=function(){return this.firestoreService.getCollectionRef(u.Collection.members)},e.prototype.getMemberRef=function(e){if(null==e?void 0:e.id)return this.getCollectionRef().doc(e.id)},e.prototype.executeQuery=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.firestoreService.executeQuery(e,s.default)]}))}))},e.prototype.getFirst=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.firestoreService.getFirst(e,s.default)]}))}))},e.prototype.save=function(e){return i(this,void 0,Promise,(function(){return o(this,(function(t){return[2,this.firestoreService.save(e)]}))}))},e.prototype.getById=function(e){return i(this,void 0,Promise,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.firestoreService.getById(e,s.default)];case 1:return[2,t.sent()]}}))}))},e.prototype.observeByUserId=function(e,t){var r=this.getCollectionRef().where(s.Field.userId,"==",e);return this.firestoreService.observeFirst(r,s.default,t)},e.prototype.getByUserId=function(e){return i(this,void 0,Promise,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=this.getCollectionRef().where(s.Field.userId,"==",e),[4,this.getFirst(t)];case 1:return[2,r.sent()]}}))}))},e.prototype.observeCurrentMember=function(e){var t,r,n=this;this.memberHasLoaded&&e.onData({member:this.currentMember,user:null!==(t=this.currentUser)&&void 0!==t?t:void 0});var a=c.getAuth().onAuthStateChanged((function(t){return i(n,void 0,void 0,(function(){return o(this,(function(n){return r&&(r(),r=void 0),t?r=this.observeByUserId(t.uid,{onData:function(r){e.onData({user:t,member:r})}}):e.onData({user:void 0,member:void 0}),[2]}))}))}));return function(){a(),r&&r()}},e.prototype.setFocusElement=function(e){var t;return i(this,void 0,Promise,(function(){var r,n,i;return o(this,(function(o){switch(o.label){case 0:return r=null!==(t=e.member)&&void 0!==t?t:this.currentMember,(n=this.getMemberRef(r))?[4,n.update((i={},i[s.default.Field.focusElement]=e.element,i))]:[2];case 1:return o.sent(),[2]}}))}))},e.sharedInstance=new e,e}();t.default=h}},[[162,0,1]]]);